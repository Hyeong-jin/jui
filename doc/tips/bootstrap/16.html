<!DOCTYPE HTML>
<html>
<head>
<META charset="UTF-8">
<link rel="stylesheet" href="../../../lib/bootstrap.min.css" />
<link rel="stylesheet" href="../../../lib/animate.min.css" />
<script src="../../../lib/jquery-1.8.0.min.js"></script>
<script src="https://rawgit.com/seogi1004/jui/master/jui.min.js"></script>

<style>
.row {
	text-align: center;
}

#paging_2 {
	margin-top: 5px;
}

#paging_2_xtable {
	border-bottom: 1px solid #ddd;
}

#paging_2_xtable .none {
	font-size: 16px;
	height: 187px;
	line-height: 187px;
	text-align: center;
}
</style>

<script>
jui.ready(function(ui, uix, _) {
	paging_2 = ui.paging("#paging_2", {
		pageCount: 100, 
		screenCount: 9,
		event: {
			page: function(pNo) {
				paging_2_xtable.page(pNo);
			}
		}
	});
	
	paging_2_xtable = uix.xtable("#paging_2_xtable", {
		fields: [ "name", "age", "location" ],
		resize: true,
		buffer: "s-page", // scroll, page, s-page
		bufferCount: 100,
		event: {
			sortend: function(data, e) {
				paging_2.first();
			}
		},
        animate: true
	});
});

function run() {
	xtableRun();
	paging_2.reload(paging_2_xtable.count());
}

function xtableRun() {
	var result = [], 
		dataSize = 1000000,
		nStart = new Date().getTime();
	
	for(var i = 0; i < dataSize; i++) {
		result.push({ name: "Alvin" + i, age: Math.floor(Math.random() * 100) + 1, location: "LA" });
	}
	
	var nEnd = new Date().getTime(); 
	paging_2_xtable.update(result);
	paging_2_xtable.resize();
	var nEnd2 = new Date().getTime(); 
	
	alert(
		"임의의 데이터 " + (dataSize / 10000) + "만개를 생성합니다.\n\n" +
		"데이터 생성시간 : " + ((nEnd - nStart) / 1000) + "sec\n" +
		"테이블 갱신시간 : " + ((nEnd2 - nEnd) / 1000) + "sec"
	);
}
</script>
</head>
<body>
<div id="paging_2_xtable">
	<table class="table table-condensed table-bordered">
		<thead>
			<tr>
				<th>Name</th>
				<th>Age</th>
				<th>Location</th>
			</tr>
		</thead>
		<tbody></tbody>
	</table>
</div>
<div class="row">
	<ul id="paging_2" class="pagination pagination-sm"></ul>
</div>

<script data-jui="#paging_2_xtable" data-tpl="row" type="text/template">
	<tr>
		<td><!= name !></td>
		<td><!= age !></td>
		<td><!= location !></td>
	</tr>
</script>

<script data-jui="#paging_2_xtable" data-tpl="none" type="text/template">
	<tr>
		<td colspan="3" class="none">Data does not exist.</td>
	</tr>
</script>

<script data-jui="#paging_2" data-tpl="pages" type="text/template">
	<li class="prev"><a href="#">&laquo;</a></li>
	<! for(var i = 0; i < pages.length; i++) { !>
		<li class="page"><a href="#"><!= pages[i] !></a></li>
	<! } !>
	<li class="next"><a href="#">&raquo;</a></li>
</script>
</body>
</html>