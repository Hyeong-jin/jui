!function(a,b){var c={jquery:b},d={},e=function(a,b){function c(b,c){var d=a[b];a[b]=a[c],a[c]=d}function d(b,d,f){var g=d,h=a[b];c(b,f);for(var i=d;f>i;i++)(e(a[i],h)||!e(h,a[i])&&i%2==1)&&(c(i,g),g++);return c(f,g),g}var e=null,a=b?a.slice(0):a;this.setCompare=function(a){e=a},this.run=function(b,c){var e=null;return"number"!=typeof b&&(b=0),"number"!=typeof c&&(c=a.length-1),c>b&&(e=b+Math.ceil(.5*(c-b)),newPivot=d(e,b,c),this.run(b,newPivot-1),this.run(newPivot+1,c)),a}},f=function(){this.isIndexDepth=function(a){return"string"==typeof a&&-1!=a.indexOf(".")?!0:!1},this.getIndexList=function(a){var b=[],c=""+a;if(1==c.length)b[0]=parseInt(a);else for(var d=c.split("."),e=0;e<d.length;e++)b[e]=parseInt(d[e]);return b},this.changeIndex=function(a,b,c){for(var d=this.getIndexList(c).length,e=this.getIndexList(a),f=this.getIndexList(b),g=0;d>g;g++)e.shift();return f.concat(e).join(".")},this.getNextIndex=function(a){var b=this.getIndexList(a),c=b.pop()+1;return b.push(c),b.join(".")},this.getParentIndex=function(a){if(!this.isIndexDepth(a))return null;var b=this.getIndexList(a);return 2==b.length?""+b[0]:b.length>2?(b.pop(),b.join(".")):void 0}},g={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){var b,c,d,e,f,h,i,j="",k=0;for(a=g._utf8_encode(a);k<a.length;)b=a.charCodeAt(k++),c=a.charCodeAt(k++),d=a.charCodeAt(k++),e=b>>2,f=(3&b)<<4|c>>4,h=(15&c)<<2|d>>6,i=63&d,isNaN(c)?h=i=64:isNaN(d)&&(i=64),j=j+g._keyStr.charAt(e)+g._keyStr.charAt(f)+g._keyStr.charAt(h)+g._keyStr.charAt(i);return j},decode:function(a){var b,c,d,e,f,h,i,j="",k=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");k<a.length;)e=g._keyStr.indexOf(a.charAt(k++)),f=g._keyStr.indexOf(a.charAt(k++)),h=g._keyStr.indexOf(a.charAt(k++)),i=g._keyStr.indexOf(a.charAt(k++)),b=e<<2|f>>4,c=(15&f)<<4|h>>2,d=(3&h)<<6|i,j+=String.fromCharCode(b),64!=h&&(j+=String.fromCharCode(c)),64!=i&&(j+=String.fromCharCode(d));return j=g._utf8_decode(j)},_utf8_encode:function(a){a=a.replace(/\r\n/g,"\n");for(var b=String.fromCharCode(239)+String.fromCharCode(187)+String.fromCharCode(191),c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b+=String.fromCharCode(d):d>127&&2048>d?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(63&d|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(63&d|128))}return b},_utf8_decode:function(a){for(var b="",c=0,d=c1=c2=0;c<a.length;)d=a.charCodeAt(c),128>d?(b+=String.fromCharCode(d),c++):d>191&&224>d?(c2=a.charCodeAt(c+1),b+=String.fromCharCode((31&d)<<6|63&c2),c+=2):(c2=a.charCodeAt(c+1),c3=a.charCodeAt(c+2),b+=String.fromCharCode((15&d)<<12|(63&c2)<<6|63&c3),c+=3);return b}},h=function(a,b,c){var d={},e={},f=Array.prototype,g=f.slice,h=f.forEach,i={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(var j in i)i[i[j]]=j;var k=/\\|'|\r|\n|\t|\u2028|\u2029/g,l=/\\(\\|'|r|n|t|u2028|u2029)/g,m=/.^/,n=function(a){return a.replace(l,function(a,b){return i[b]})},o=d.each=d.forEach=function(a,b,c){if(null!=a)if(h&&a.forEach===h)a.forEach(b,c);else if(a.length===+a.length){for(var f=0,g=a.length;g>f;f++)if(f in a&&b.call(c,a[f],f,a)===e)return}else for(var i in a)if(d.has(a,i)&&b.call(c,a[i],i,a)===e)return};return d.has=function(a,b){return hasOwnProperty.call(a,b)},d.defaults=function(a){return o(g.call(arguments,1),function(b){for(var c in b)null==a[c]&&(a[c]=b[c])}),a},d.templateSettings={evaluate:/<\!([\s\S]+?)\!>/g,interpolate:/<\!=([\s\S]+?)\!>/g,escape:/<\!-([\s\S]+?)\!>/g},d.template=function(a,b,c){c=d.defaults(c||{},d.templateSettings);var e="__p+='"+a.replace(k,function(a){return"\\"+i[a]}).replace(c.escape||m,function(a,b){return"'+\n_.escape("+n(b)+")+\n'"}).replace(c.interpolate||m,function(a,b){return"'+\n("+n(b)+")+\n'"}).replace(c.evaluate||m,function(a,b){return"';\n"+n(b)+"\n;__p+='"})+"';\n";c.variable||(e="with(obj||{}){\n"+e+"}\n"),e="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+e+"return __p;\n";var f=new Function(c.variable||"obj","_",e);if(b)return f(b,d);var g=function(a){return f.call(this,a,d)};return g.source="function("+(c.variable||"obj")+"){\n"+e+"}",g},d.template(a,b,c)},i=c["util.base"]={browser:{webkit:window.webkitURL?!0:!1,mozilla:window.mozInnerScreenX?!0:!1,msie:-1!=navigator.userAgent.indexOf("Trident")?!0:!1},isTouch:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),scrollWidth:function(){var a=b(".jui").size()>0&&this.browser.webkit?!0:!1,c=b('<div style="width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;"><div style="height:100px;"></div></div>');b("body").append(c);var d=b("div",c).innerWidth();c.css("overflow-y","auto");var e=b("div",c).innerWidth();return b(c).remove(),a?10:d-e},inherit:function(a,b){a.prototype=new b,a.prototype.constructor=a,a.prototype.parent=a.prototype},extend:function(a,b){if(!b||"object"!=typeof b)return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a},pxToInt:function(a){return"string"==typeof a&&-1!=a.indexOf("px")?parseInt(a.split("px").join("")):a},clone:function(a){var c=b.isArray(a)?[]:{};for(var d in a)c[d]="object"==typeof a[d]?this.clone(a[d]):a[d];return c},sort:function(a){return new e(a)},runtime:function(a,b){var c=(new Date).getTime();b();var d=(new Date).getTime();console.log(a+" : "+(d-c)+"ms")},template:function(a,b){return b?h(a,b):h(a)},resize:function(a,c){var d=function(){var b=0;return function(){clearTimeout(b),b=setTimeout(a,c)}}();b(window).resize(function(){d()})},index:function(){return new f},chunk:function(a,b){for(var c=[],d=0,e=a.length;e>d;)c.push(a.slice(d,d+=b));return c},typeCheck:function(a,b){function c(a,b){return{string:"string"==typeof b?!0:!1,integer:"number"==typeof b&&b%1==0?!0:!1,"float":"number"==typeof b&&b%1!=0?!0:!1,number:"number"==typeof b?!0:!1,object:"object"==typeof b&&null!==b?!0:!1,"function":"function"==typeof b?!0:!1,array:null!=b&&"object"==typeof b&&"number"==typeof b.length?!0:!1,"boolean":"boolean"==typeof b?!0:!1,undefined:"undefined"==typeof b?!0:!1,"null":null===b?!0:!1}[a]}if("object"==typeof a&&a.length){for(var d=a,e=0;e<d.length;e++)if(c(d[e],b))return!0;return!1}return c(a,b)},typeCheckObj:function(a,b){if("object"==typeof a){var c=this;for(var d in a){var e=a[d];"function"==typeof e&&!function(d,e){a[d]=function(){for(var a=arguments,f=b[d],g=0;g<a.length;g++)if(!c.typeCheck(f[g],a[g]))throw new Error("JUI_CRITICAL_ERR: the "+g+"th parameter is not a "+f[g]+" ("+name+")");return e.apply(this,a)}}(d,e)}}},dataToCsv:function(a,b,c){for(var d="",e=c?c:b.length,f=-1;e>f;f++){for(var g=[],h=0;h<a.length;h++)a[h]&&g.push(-1==f?a[h]:b[f][a[h]]);d+=g.join(",")+"\n"}return d},dataToCsv2:function(a){for(var c="",d=b.extend({fields:null,rows:null,names:null,count:this.typeCheck("integer",a.count)?a.count:a.rows.length},a),e=-1;e<d.count;e++){for(var f=[],g=0;g<d.fields.length;g++)d.fields[g]&&f.push(-1==e?d.names&&d.names[g]?d.names[g]:d.fields[g]:d.rows[e][d.fields[g]]);c+=f.join(",")+"\n"}return c},fileToCsv:function(a,b){var c=new FileReader;c.onload=function(a){"function"==typeof b&&b(a.target.result)},c.readAsText(a)},csvToBase64:function(a){return"data:application/octet-stream;base64,"+g.encode(a)},csvToData:function(a,b){for(var c=[],d=b.split("\n"),e=1;e<d.length;e++)if(""!=d[e]){for(var f=d[e].split(","),g={},h=0;h<a.length;h++)g[a[h]]=f[h];c.push(g)}return c},getCsvFields:function(a,b){for(var c=b?b:a,d=0;d<c.length;d++)isNaN(c[d])||(c[d]=a[c[d]]);return c},svgToBase64:function(a){return"data:image/svg+xml;base64,"+g.encode(a)},dateFormat:function(a,b,c){function d(a,b){var c=a+"";for(b=b||2;c.length<b;)c="0"+c;return c}var e=["\x00","January","February","March","April","May","June","July","August","September","October","November","December"],e=["\x00","January","February","March","April","May","June","July","August","September","October","November","December"],e=["\x00","January","February","March","April","May","June","July","August","September","October","November","December"],f=["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],g=["","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],h=["","Sun","Mon","Tue","Wed","Thu","Fri","Sat"],i=c?a.getUTCFullYear():a.getFullYear();b=b.replace(/(^|[^\\])yyyy+/g,"$1"+i),b=b.replace(/(^|[^\\])yy/g,"$1"+i.toString().substr(2,2)),b=b.replace(/(^|[^\\])y/g,"$1"+i);var j=(c?a.getUTCMonth():a.getMonth())+1;b=b.replace(/(^|[^\\])MMMM+/g,"$1"+e[0]),b=b.replace(/(^|[^\\])MMM/g,"$1"+f[0]),b=b.replace(/(^|[^\\])MM/g,"$1"+d(j)),b=b.replace(/(^|[^\\])M/g,"$1"+j);var k=c?a.getUTCDate():a.getDate();b=b.replace(/(^|[^\\])dddd+/g,"$1"+g[0]),b=b.replace(/(^|[^\\])ddd/g,"$1"+h[0]),b=b.replace(/(^|[^\\])dd/g,"$1"+d(k)),b=b.replace(/(^|[^\\])d/g,"$1"+k);var l=c?a.getUTCHours():a.getHours();b=b.replace(/(^|[^\\])HH+/g,"$1"+d(l)),b=b.replace(/(^|[^\\])H/g,"$1"+l);var m=l>12?l-12:0==l?12:l;b=b.replace(/(^|[^\\])hh+/g,"$1"+d(m)),b=b.replace(/(^|[^\\])h/g,"$1"+m);var n=c?a.getUTCMinutes():a.getMinutes();b=b.replace(/(^|[^\\])mm+/g,"$1"+d(n)),b=b.replace(/(^|[^\\])m/g,"$1"+n);var o=c?a.getUTCSeconds():a.getSeconds();b=b.replace(/(^|[^\\])ss+/g,"$1"+d(o)),b=b.replace(/(^|[^\\])s/g,"$1"+o);var p=c?a.getUTCMilliseconds():a.getMilliseconds();b=b.replace(/(^|[^\\])fff+/g,"$1"+d(p,3)),p=Math.round(p/10),b=b.replace(/(^|[^\\])ff/g,"$1"+d(p)),p=Math.round(p/10),b=b.replace(/(^|[^\\])f/g,"$1"+p);var q=12>l?"AM":"PM";b=b.replace(/(^|[^\\])TT+/g,"$1"+q),b=b.replace(/(^|[^\\])T/g,"$1"+q.charAt(0));var r=q.toLowerCase();b=b.replace(/(^|[^\\])tt+/g,"$1"+r),b=b.replace(/(^|[^\\])t/g,"$1"+r.charAt(0));var s=-a.getTimezoneOffset(),t=c||!s?"Z":s>0?"+":"-";if(!c){s=Math.abs(s);var u=Math.floor(s/60),v=s%60;t+=d(u)+":"+d(v)}b=b.replace(/(^|[^\\])K/g,"$1"+t);var w=(c?a.getUTCDay():a.getDay())+1;return b=b.replace(new RegExp(g[0],"g"),g[w]),b=b.replace(new RegExp(h[0],"g"),h[w]),b=b.replace(new RegExp(e[0],"g"),e[j]),b=b.replace(new RegExp(f[0],"g"),f[j]),b=b.replace(/\\(.)/g,"$1")},btoa:g.encode,atob:g.decode},j=function(a){for(var b=[],d=0;d<a.length;d++){var e=c[a[d]];if(i.typeCheck(["function","object"],e))b.push(e);else{var f=k(a[d]);if(null==f)throw new Error("JUI_CRITICAL_ERR: '"+a[d]+"' is not loaded");b.push(f)}}return b},k=function(a){var b=null,a=a+".";for(var d in c)if(-1!=d.indexOf(a)&&i.typeCheck(["function","object"],c[d])){var e=d.split(a).join("");-1==e.indexOf(".")&&(null==b&&(b={}),b[e]=c[d])}return b};a.jui={ready:function(){var a=[],c=2==arguments.length?arguments[1]:arguments[0],d=2==arguments.length?arguments[0]:null;if(!i.typeCheck(["array","null"],d)||!i.typeCheck("function",c))throw new Error("JUI_CRITICAL_ERR: Invalid parameter type of the function");b(function(){a=d?j(d):[k("ui"),k("uix"),i],c.apply(null,a)})},defineUI:function(a,b,e,f){if(!(i.typeCheck("string",a)&&i.typeCheck("array",b)&&i.typeCheck("function",e)&&i.typeCheck(["string","undefined"],f)))throw new Error("JUI_CRITICAL_ERR: Invalid parameter type of the function");if(i.typeCheck("function",c[a]))throw new Error("JUI_CRITICAL_ERR: '"+a+"' is already exist");if(i.typeCheck("undefined",f)&&(f="core"),!i.typeCheck("function",c[f]))throw new Error("JUI_CRITICAL_ERR: Parents are the only function");if(d[f]!==!0)throw new Error("JUI_CRITICAL_ERR: UI function can not be inherited");var g=j(b),h=e.apply(null,g);i.inherit(h,c[f]),c[a]=c.core.init({type:a,"class":h})},define:function(a,b,e,f){if(!(i.typeCheck("string",a)&&i.typeCheck("array",b)&&i.typeCheck("function",e)&&i.typeCheck(["string","undefined"],f)))throw new Error("JUI_CRITICAL_ERR: Invalid parameter type of the function");if(i.typeCheck("function",c[a]))throw new Error("JUI_CRITICAL_ERR: '"+a+"' is already exist");var g=j(b),h=e.apply(null,g);if(i.typeCheck("function",c[f])){if(d[f]!==!0)throw new Error("JUI_CRITICAL_ERR: UI function can not be inherited");i.inherit(h,c[f])}c[a]=h,d[a]=!0},include:function(a){if(!i.typeCheck("string",a))throw new Error("JUI_CRITICAL_ERR: Invalid parameter type of the function");var b=c[a];if(i.typeCheck(["function","object"],b))return b;var d=k(a);if(null==d)throw new Error("JUI_CRITICAL_ERR: '"+a+"' is not loaded");return d},includeAll:function(){var a=[];for(var b in c)a.push(c[b]);return a},log:function(){var a=window.open(this.logUrl,"JUIM","width=800, height=600, toolbar=no, menubar=no, resizable=yes");return jui.debugAll(function(b,c){a.log(b,c)}),a},logUrl:"jui.mng.html"}}(window,jQuery||$),jui.define("core",["jquery","util.base"],function(a,b){var c=new function(){var d=[],e=[];this.add=function(a){d.push(a)},this.get=function(a){var c=[];if(b.typeCheck("integer",a))return d[a];if(b.typeCheck("string",a))for(var e=0;e<d.length;e++)a==d[e].type?c.push(d[e]):-1!=d[e].type.indexOf("."+a)&&c.push(d[e]);return c},this.getAll=function(){return d},this.size=function(){return d.length},this.debug=function(b,c,d,e){if(b.__proto__){var f=["emit","on","addEvent","addValid","callBefore","callAfter","callDelay","setTpl","setVo","setOption"];for(var g in b){var h=b[g];"function"==typeof h&&-1==a.inArray(g,f)&&!function(a,d,f,g){b.__proto__[a]=function(){var b=Date.now(),h=d.apply(this,arguments),i=Date.now();return"function"==typeof e?e({type:jui.get(c).type,name:a,c_index:f,u_index:g,time:i-b},arguments):(console.log(isNaN(f)||isNaN(g)?"NAME("+a+"), TIME("+(i-b)+"ms), ARGUMENTS...":"TYPE("+jui.get(c).type+"), NAME("+a+"), INDEX("+f+":"+g+"), TIME("+(i-b)+"ms), ARGUMENTS..."),console.log(arguments),console.log("")),h}}(g,h,c,d)}}},this.debugAll=function(a){for(var b=0;b<d.length;b++)for(var c=d[b].list,e=0;e<c.length;e++)this.debug(c[e],b,e,a)},this.addClass=function(a){e.push(a)},this.getClass=function(a){if(b.typeCheck("integer",a))return e[a];if(b.typeCheck("string",a))for(var c=0;c<e.length;c++){if(a==e[c].type)return e[c];if(-1!=e[c].type.indexOf("."+a))return e[c]}return null},this.getClassAll=function(){return e},this.create=function(a,d,e){var f=c.getClass(a);if(b.typeCheck("null",f))throw new Error("JUI_CRITICAL_ERR: '"+a+"' does not exist");return f["class"](d,e)}},d=function(){function c(b){for(var c=["webkit","moz","MS","o",""],d=0;d<c.length;d++){var e=b.type;c[d]||(e=e.toLowerCase()),a(b.target).on(c[d]+e,b.callback)}g.push(b)}function d(b){b.callback&&!b.children?a(b.target).on(b.type,b.callback):a(b.target).on(b.type,b.children,b.callback),g.push(b)}function e(b){b.callback&&!b.children?a(b.target).on(f(b.type),b.callback):a(b.target).on(f(b.type),b.children,b.callback),g.push(b)}function f(a){return{click:"touchstart",dblclick:"touchend",mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"}[a]}var g=[];this.add=function(f){var g={target:f[0],type:f[1]};b.typeCheck("function",f[2])?g=a.extend(g,{callback:f[2]}):b.typeCheck("string",f[2])&&(g=a.extend(g,{children:f[2],callback:f[3]}));for(var h=b.typeCheck("array",g.type)?g.type:[g.type],i=0;i<h.length;i++)g.type=h[i],-1!=g.type.toLowerCase().indexOf("animation")?c(g):("body"!=g.target&&g.target!=window&&a(g.target).unbind(g.type),b.isTouch?e(g):d(g))},this.trigger=function(c,d){a(c).trigger(b.isTouch?f(d):d)},this.get=function(a){return g[a]},this.getAll=function(){return g},this.size=function(){return g.length}},e=function(){var c=null;this.emit=function(a,b){for(var c=null,d=0;d<this.event.length;d++){var e=this.event[d];e.type==a.toLowerCase()&&(c="object"==typeof b&&void 0!=b.length?e.callback.apply(this,b):e.callback.call(this,b))}return c},this.on=function(a,b){("string"==typeof a||"object"==typeof b)&&this.event.push({type:a.toLowerCase(),callback:b})},this.addEvent=function(){this.listen.add(arguments)},this.addTrigger=function(a,b){this.listen.trigger(a,b)},this.addValid=function(a,c){if(this.__proto__){var d=this.__proto__[a];this.__proto__[a]=function(){for(var e=arguments,f=0;f<e.length;f++)if(!b.typeCheck(c[f],e[f]))throw new Error("JUI_CRITICAL_ERR: the "+f+"th parameter is not a "+c[f]+" ("+a+")");return d.apply(this,e)}}},this.callBefore=function(a,b){if(this.__proto__){var c=this.__proto__[a];this.__proto__[a]=function(){var a=arguments;return"function"!=typeof b?c.apply(this,a):b.apply(this,a)!==!1?c.apply(this,a):void 0}}},this.callAfter=function(a,b){if(this.__proto__){var c=this.__proto__[a];this.__proto__[a]=function(){var a=arguments,d=c.apply(this,a);return"function"==typeof b&&d!==!1&&b.apply(this,a),d}}},this.callDelay=function(a,b){function c(a,c){var e=d.apply(a,c);"function"==typeof b.after&&e!==!1&&b.after.apply(a,c)}if(this.__proto__){var d=this.__proto__[a],e=isNaN(b.delay)?0:b.delay;this.__proto__[a]=function(){var a=this,d=arguments;"function"==typeof b.before&&b.before.apply(a,d),e>0?setTimeout(function(){c(a,d)},e):c(a,d)}}},this.setTpl=function(a,c){this.tpl[a]=b.template(c)},this.setVo=function(){this.options.vo&&(null!=c&&c.reload(),c=a(this.selector).jbinder(),this.bind=c)},this.setOption=function(a,b){if("object"==typeof a)for(var c in a)this.options[c]=a[c];else this.options[a]=b}};return e.build=function(e){function f(b,c){var d=["event","tpl","vo"],e=[],f=[];for(var g in b)e.push(g);for(var g in c)f.push(g);for(var h=0;h<f.length;h++){var i=f[h];if(-1==a.inArray(i,e)&&-1==a.inArray(i,d))throw new Error("JUI_CRITICAL_ERR: '"+i+"' is not an option")}}return function(g,h){var i=a(g),j=[],k=b.typeCheck("function",e["class"].setting)?e["class"].setting():{};return i.each(function(c){var l=new e["class"],m=b.typeCheck("object",k.options)?k.options:{};f(m,h);var n=a.extend(!0,m,h);if(n.tpl=b.typeCheck("object",n.tpl)?n.tpl:{},l.init.prototype=l,l.init.prototype.selector=i.selector,l.init.prototype.root=this,l.init.prototype.options=n,l.init.prototype.tpl={},l.init.prototype.event=new Array,l.init.prototype.listen=new d,l.init.prototype.timestamp=(new Date).getTime(),l.init.prototype.index=0==i.size()?null:c,a("script").each(function(){if(g==a(this).data("jui")||g==a(this).data("vo")){var b=a(this).data("tpl");if(""==b)throw new Error("JUI_CRITICAL_ERR: 'data-tpl' property is required");n.tpl[b]=a(this).html()}}),b.typeCheck("object",n.tpl))for(var o in n.tpl){var p=n.tpl[o];b.typeCheck("string",p)&&""!=p&&(l.init.prototype.tpl[o]=b.template(p))}var q=new l.init,r=b.typeCheck("object",k.valid)?k.valid:{},s=b.typeCheck("object",k.animate)?k.animate:{};if(b.typeCheck("object",q.options.event))for(var t in q.options.event)q.on(t,q.options.event[t]);for(var t in r)b.typeCheck("array",r[t])&&q.addValid(t,r[t]);if(n.animate===!0)for(var t in s)b.typeCheck("object",s[t])&&q.callDelay(t,s[t]);j[c]=q}),c.add({type:e.type,list:j,selector:g,options:h,index:c.size()}),1==j.length?j[0]:j}},e.init=function(a){var b=null;return"object"==typeof a&&(b=e.build(a),c.addClass({type:a.type,"class":b})),b},window.jui="object"==typeof jui?a.extend(jui,c):c,e}),jui.defineUI("ui.button",["jquery","util.base"],function(a,b){var c=function(b,c,d){this.data={index:0,value:"",elem:null},this.ui=b,this.element=c,this.options=a.extend({index:0,value:""},d),this._setting=function(b,c,d){function e(b,c){var d=a(c).attr("value"),e=a(c).text();g.data={index:b,value:d,text:e},a(c).addClass(h)}function f(b){a(b).removeClass(h)}var g=this,h="active",i=this.options.index,j=this.options.value;a(g.element).children(".btn").each(function(g){"event"==b?c.currentTarget==this?e(g,this):f(this):"init"==b&&("value"==d?j==a(this).attr("value")?e(g,this):f(this):i==g?e(g,this):f(this))})},this.init=function(){var b=this;this.ui.addEvent(a(b.element).children(".btn"),"click",function(a){b._setting("event",a),b.ui.emit("change",[b.data,a]),a.preventDefault()}),""!=this.options.value?this._setting("init",this.options.value,"value"):this._setting("init",this.options.index,"index")}},d=function(){this.data=[],this.options=a.extend({index:[],value:[]},this.options),this._setting=function(b,c,d){function e(b,c){var d=a(c).attr("value"),e=a(c).text();h.data[b]={index:b,value:d,text:e},a(c).addClass(i)}function f(b,c){h.data[b]=null,a(c).removeClass(i)}function g(a,b){for(var c=0;c<a.length;c++)if(a[c]==b)return!0;return!1}var h=this,i="active",j=this.options.index,k=this.options.value;a(h.element).children(".btn").each(function(h){"init"==b?"value"==d?g(k,a(this).attr("value"))?e(h,this):f(h,this):g(j,h)?e(h,this):f(h,this):c.currentTarget==this&&(a(this).hasClass("active")?f(h,this):e(h,this))})}},e=function(){var a={};this.init=function(){var b=this,e=this.options;"radio"==e.type?(a[e.type]=new c(b,this.root,b.options),a[e.type].init()):"check"==e.type&&(d.prototype=new c(b,this.root,b.options),a[e.type]=new d,a[e.type].init())},this.setIndex=function(b){a[this.options.type].options.index=b,a[this.options.type]._setting("init",null,"index")},this.setValue=function(b){a[this.options.type].options.value=b,a[this.options.type]._setting("init",null,"value")},this.getData=function(){return a[this.options.type].data},this.getValue=function(){var a=this.getData();if(b.typeCheck("array",a)){for(var c=[],d=0;d<a.length;d++)c[d]=null!=a[d]?a[d].value:a[d];return c}return a.value},this.reload=function(){a[this.options.type]._setting("init")}};return e.setting=function(){return{options:{type:"radio",index:0,value:""},valid:{setIndex:[["integer","array"]],setValue:[["integer","string","array","boolean"]]}}},e}),jui.defineUI("ui.combo",["jquery","util.base"],function(a,b){var c=function(){for(var a=jui.get("combo"),b=0;b<a.length;b++)for(var c=a[b].list,d=0;d<c.length;d++)"open"==c[d].type&&c[d].fold()};a(function(){a("body").on("click",function(){c()})});var d=function(){function d(b,c){var d=i.root,f=i.text,g=i.drop,h=g.children("li");h.each(function(g){var h=e(this),i=a(h).attr("value"),k=a(h).text();i||(i=k,a(h).attr("value",i)),("index"==b&&c==g||"value"==b&&c==i)&&(j={index:g,value:i,text:k},d.attr("value",i),f.html(k),d.select&&d.select[0]&&(d.select[0].selectedIndex=g))}),0==h.size()&&(j=null)}function e(b){return a(b).children("a").size()>0?a(b).children("a")[0]:b}function f(a){a.options.keydown&&a.addEvent(window,"keydown",function(b){if("hide"!=a.type){var c=i.drop.children("li");return 38==b.which?(1>k?k=c.size()-1:k--,g(a,function(){k--,g(a)}),!1):40==b.which?(k<c.size()-1?k++:k=0,g(a,function(){k++,g(a)}),!1):void(13==b.which&&(c.eq(k).trigger("click"),k=-1))}})}function g(a,b){var c=i.drop.children("li"),d=c.eq(k);c.removeClass("active"),""!=d.val()||""!=d.html()?(d.addClass("active"),a.options.height>0&&i.drop.scrollTop(k*d.outerHeight())):"function"==typeof b&&b()}function h(c){if(b.isTouch){var d=i.root;if(d.select&&d.select[0]){var e=d.select;e.empty()}else{var e=a("<select></select>").css({position:"absolute",opacity:.01});d.find("ul").after(e),c.addEvent(e,"change",function(b){var d=a(b.currentTarget).find("option:selected").data("elem");c.addTrigger(d,"touchstart")}),d.select=e}d.find("ul > li").each(function(b,c){var d=a(c).data("value"),f=a(c).text();e.append(a("<option></option>").val(d).text(f).data("elem",c))})}}var i=null,j=null,k=-1;this.init=function(){var d=this,g=this.options,h=a(this.root),k=h.children(".btn").not(".btn-toggle"),l=h.children(".btn-toggle"),m=h.children(".btn"),n=h.children("ul");n.insertAfter(k),g.width>0&&(k.outerWidth(g.width-l.outerWidth()+1),k.css({overflow:"hidden","white-space":"nowrap"})),g.height>0&&n.css({maxHeight:g.height,overflow:"auto"}),this.addEvent(m,"click",function(a){if(b.isTouch)h.select.focus();else{if("open"==d.type)return;c(),d.open(a)}return!1}),this.addEvent(n,"click","li",function(b){c();var f=e(b.target),g=a(f).attr("value"),i=a(f).html();j={value:g,text:i,element:f},k.html(i),h.attr("value",g),d.emit("change",[j,b]),b.preventDefault()}),i={root:h,text:k,drop:n,toggle:l},this.type="fold",this.reload(),f(this)},this.setIndex=function(a){d("index",a),this.emit("change",[j])},this.setValue=function(a){d("value",a),this.emit("change",[j])},this.getData=function(){return j},this.getValue=function(){return null!=j?j.value:null},this.getText=function(){return null!=j?j.text:null},this.open=function(a){if(i.toggle.addClass("active"),i.drop.outerWidth(i.root.outerWidth()-1),"top"==this.options.position){var b=i.drop.outerHeight();i.drop.animate({top:"-"+b,height:"toggle"},100)}else i.drop.slideDown(100);this.emit("open",a),this.type="open"},this.fold=function(){i.drop.hide(),i.toggle.removeClass("active"),"top"==this.options.position&&i.drop.css("top",0),this.emit("fold"),this.type="fold"},this.reload=function(){""!=this.options.value?d("value",this.options.value):d("index",this.options.index),h(this),this.emit("reload",j)}};return d.setting=function(){return{options:{index:0,value:"",width:0,height:100,keydown:!1,position:"bottom"},valid:{setIndex:["integer"],setValue:[["integer","string","boolean"]]}}},d}),jui.defineUI("ui.datepicker",["jquery","util.base"],function(a,b){var c=function(){function c(a){a.addEvent(r.children(".prev"),"click",function(b){a.prev(b)}),a.addEvent(r.children(".next"),"click",function(b){a.next(b)})}function e(a,b){var c=a.options;if("daily"==c.type){var d=10>n?"0"+n:n,e=10>b?"0"+b:b;p=new Date(l+"/"+d+"/"+e)}else if("monthly"==c.type){var d=10>n?"0"+n:n;p=new Date(l+"/"+d+"/01")}else"yearly"==c.type&&(p=new Date(b+"/01/01"))}function f(a){var b=a.options,c=null;if("daily"==b.type){var d=10>n?"0"+n:n;c=new Date(l+"/"+d+"/01")}else"monthly"==b.type?c=new Date(l+"/01/01"):"yearly"==b.type&&(c=new Date);return c}function g(b,c){function d(a){return"daily"==f.type?(a+1)%7==0:(a+1)%3==0}var f=b.options,g="",h=[];q={};for(var i=0;i<c.objs.length;i++)h.push(c.nums[i]),d(i)&&(g+=b.tpl.dates({dates:h}),h=[]);var j=a(g);return j.find("td").each(function(d){a(this).addClass(c.objs[d].type),b.addEvent(this,"click",function(f){"none"!=c.objs[d].type&&(s.find("td").removeClass("active"),a(this).addClass("active"),e(b,c.objs[d].no),b.emit("select",[b.getFormat(),f]))}),"none"!=c.objs[d].type&&(q[c.objs[d].no]=this)}),j}function h(a,b){if(2==b)return a%100==0||a%4!=0&&a%400!=0?28:29;var c=[31,0,31,30,31,30,31,31,30,31,30,31];return c[b-1]}function i(a,b){for(var c=[],d=[],e=1,f=new Date,g=new Date(a+"-"+(10>b?"0"+b:b)).getDay(),i=h(a,b),j=1==b?a-1:a,k=1==b?12:b-1,l=h(j,k),m=0;g>m;m++)d[m]=l-g+(m+1),c[m]={type:"none",no:d[m]};for(var m=g;42>m;m++)i>=e?(d[m]=e,c[m]={type:f.getMonth()+1==b&&f.getDate()==e?"now":"",no:d[m]},e++):(d[m]=e-i,c[m]={type:"none",no:d[m]},e++);return{objs:c,nums:d}}function j(){for(var a=[],b=[],c=new Date,d=1;12>=d;d++)b.push(d),a.push({type:c.getFullYear()==l&&c.getMonth()+1==d?"now":"",no:d});return{objs:a,nums:b}}function k(a){for(var b=[],c=[],d=a-4,e=new Date,f=d;d+12>f;f++)c.push(f),b.push({type:e.getFullYear()==f?"now":"",no:f});return{objs:b,nums:c}}var l=null,n=null,o=null,p=null,q={},r=null,s=null;this.init=function(){var b=(this.options,new Date);l=b.getFullYear(),n=b.getMonth()+1,o=b.getDate(),r=a(this.root).children(".head"),s=a(this.root).children(".body"),c(this),this.page(l,n),this.select()},this.page=function(a,c){if(0!=arguments.length){var d=this.options;"daily"==d.type?(l=a,n=c,s.find("tr:not(:first-child)").remove(),s.append(g(this,i(l,n)))):"monthly"==d.type?(l=a,s.find("tr").remove(),s.append(g(this,j(l)))):"yearly"==d.type&&(l=a,s.find("tr").remove(),s.append(g(this,k(l)))),r.children(".title").html(b.dateFormat(f(this),d.titleFormat))}},this.prev=function(a){var b=this.options;if("daily"==b.type){var c=1==n?l-1:l,d=1==n?12:n-1;this.page(c,d)}else"monthly"==b.type?this.page(l-1):"yearly"==b.type&&this.page(l-12);this.emit("prev",[a])},this.next=function(a){var b=this.options;if("daily"==b.type){var c=12==n?l+1:l,d=12==n?1:n+1;this.page(c,d)}else"monthly"==b.type?this.page(l+1):"yearly"==b.type&&this.page(l+12);this.emit("next",[a])},this.select=function(){var a=this.options,b=arguments;if(0==b.length)y=l,m=n,d=o;else if(3==b.length)y=b[0],m=b[1],d=b[2];else if(1==b.length){var c=new Date(b[0]);y=c.getFullYear(),m=c.getMonth()+1,d=c.getDate()}"daily"==a.type?(this.page(y,m),this.addTrigger(q[d],"click")):"monthly"==a.type?(this.page(y),this.addTrigger(q[m],"click")):"yearly"==a.type&&(this.page(y),this.addTrigger(q[y],"click"))},this.addTime=function(a){p=new Date(this.getTime()+a),this.select(this.getTime())},this.getDate=function(){return p},this.getTime=function(){return p.getTime()},this.getFormat=function(a){return b.dateFormat(p,"string"==typeof a?a:this.options.format)}};return c.setting=function(){return{options:{type:"daily",titleFormat:"yyyy.MM",format:"yyyy-MM-dd",animate:!1},valid:{page:["integer","integer"],select:["integer","integer","integer"],addTime:["integer"],getFormat:["string"]},animate:{page:{after:function(){var b=this;$body.find("tr").each(function(c){var d=200*(c+1);a(this).addClass("fadeIn").css({"animation-duration":d+"ms"}),function(c){b.addEvent(this,"AnimationEnd",function(){a(c).removeClass("fadeIn")})}(this)})}}}}},c}),jui.defineUI("ui.dropdown",["jquery"],function(a){var b=function(){var a=c();null!=a&&a.hide()},c=function(){for(var a=jui.get("dropdown"),b=0;b<a.length;b++)for(var c=a[b].list,d=0;d<c.length;d++)if("show"==c[d].type)return c[d];return null};a(function(){a("body").on("click",function(a){var c=a.target.tagName;"LI"!=c&&"INPUT"!=c&&"A"!=c&&"BUTTON"!=c&&"I"!=c&&b()}),a(window).on("keydown",function(a){var b=c();null!=b&&b.wheel(a.which,function(){a.preventDefault()})})});var d=function(){function c(c){function d(a){var b=0;return f.each(function(c){a==this&&(b=c)}),b}var f=a(e.menu).find("li");f.unbind("click").unbind("hover"),c.addEvent(f,"click",function(e){if(!a(this).hasClass("divider")){var f=d(this),g=a(this).text(),h=a(this).attr("value");c.emit("change",[{index:f,value:h,text:g},e]),c.options.close&&b(),"A"==e.target.tagName&&e.preventDefault()}}),c.addEvent(f,"hover",function(){f.removeClass("active")})}function d(a,b){var c=e.menu.find("li"),d=c.eq(f);c.removeClass("active"),""!=d.val()||""!=d.html()?(d.addClass("active"),a.options.height>0&&e.menu.scrollTop(f*d.outerHeight())):"function"==typeof b&&b()}var e=null,f=-1;this.init=function(){var b=this.options,d=a(this.root),f=d.find("ul"),g=d.find(".anchor");f=0==f.size()?d:f,e={root:d,menu:f,anchor:g},e.root.outerWidth(e.menu.outerWidth()),b.width>0&&f.outerWidth(b.width),b.height>0&&f.css({maxHeight:b.height,overflow:"auto"}),b.left>0&&d.css("left",b.left),b.top>0&&d.css("top",b.top),f.css({display:"block"}),d.css({position:"absolute",display:"none"}),b.nodes.length>0?this.update(b.nodes):c(this),this.type="hide"},this.update=function(b){if(this.tpl.node){a(e.menu).empty();for(var d=0;d<b.length;d++)a(e.menu).append(this.tpl.node(b[d]));c(this)}},this.hide=function(){e.root.hide(),this.emit("hide"),this.type="hide"},this.show=function(a,c){b(),e.root.show(),e.anchor.size()>0&&e.root.css("margin-top","10px"),2==arguments.length&&this.move(a,c),this.emit("show"),this.type="show"},this.move=function(a,b){e.root.css("left",a),e.root.css("top",b)},this.wheel=function(a,b){if(this.options.keydown){var c=this,g=e.menu.find("li");(38==a||-1==a)&&(1>f?f=g.size()-1:f--,d(this,function(){f--,d(c)}),b&&b()),(40==a||1==a)&&(f<g.size()-1?f++:f=0,d(c,function(){f++,d(c)}),b&&b()),13!=a&&0!=a&&a||(c.addTrigger(g.eq(f),"click"),f=-1,b&&b())}},this.reload=function(){this.init(),this.emit("reload")}};return d.setting=function(){return{options:{close:!0,keydown:!1,left:0,top:0,width:0,height:0,nodes:[]},valid:{update:["array"],show:["number","number"],move:["number","number"],wheel:["integer","function"]}}},d}),jui.defineUI("ui.modal",["jquery","util.base"],function(a,b){var c=0;b.resize(function(){if(c!=a(window).width()){for(var b=jui.get("modal"),d=0;d<b.length;d++)for(var e=b[d].list,f=0;f<e.length;f++)"show"==e[f].type&&e[f].resize();c=a(window).width()}},300);var d=function(){function b(b){g={position:a(b.root).css("position"),left:a(b.root).css("left"),top:a(b.root).css("top"),"z-index":a(b.root).css("z-index"),display:a(b.root).css("display")},h={position:a(b.options.target).css("position")}}function c(b){var c="auto",d="auto",e=0,f=0,g=b.options.target,h="body"==g?window:g,i="body"==g?"fixed":"absolute",j="body"==g?null:"relative",k=a(g).scrollLeft();if(c=a(h).width()/2-a(b.root).width()/2+a(g).scrollLeft(),d=a(h).height()/2-a(b.root).height()/2,e=k>0?a(g).outerWidth()+k:"100%",f=a(g).outerHeight(),f=f>0?f:a(h).outerHeight(),null!=j){var l=a(h)[0].scrollHeight;
f=l>f?l:f,d+=a(h).scrollTop()}return{x:c,y:d,pos:i,tPos:j,w:e,h:f}}function d(b,c,d){null==e&&(e=a("<div id='MODAL_"+b.timestamp+"'></div>").css({position:"absolute",width:c,height:d,left:0,top:0,opacity:b.options.opacity,"background-color":b.options.color,"z-index":i+b.options.index-1}),a(b.options.target).append(e),"body"!=b.options.target&&a(b.root).insertAfter(e),b.addEvent(e,"click",function(){return b.options.autoHide&&b.hide(),!1}))}var e=null,f=null,g=null,h=null,i=5e3;this.init=function(){b(this),this.type="hide"},this.hide=function(){"none"!=g.display&&(f.remove(),f=null),a(this.options.target).css("position",h.position),a(this.root).css(g),e&&(e.remove(),e=null),this.type="hide"},this.show=function(){var b=c(this);"none"!=g.display&&(f=a(this.root).clone(),f.insertAfter(a(this.root))),this.resize(),a(this.options.target).css("position",b.tPos),a(this.root).show(),d(this,b.w,b.h),this.type="show"},this.resize=function(){var b=c(this);a(this.root).css({position:b.pos,left:b.x,top:b.y,"z-index":i+this.options.index}),null!=e&&e.height(b.h)}};return d.setting=function(){return{options:{color:"black",opacity:.4,target:"body",index:0,autoHide:!0}}},d}),jui.defineUI("ui.notify",["jquery"],function(a){var b=12,c=function(){var c=null;this.init=function(){var d=this.options,e="object"==typeof d.padding?b:d.padding,f={top:{top:e,bottom:null,left:e,right:e},"top-right":{top:e,bottom:null,left:null,right:e},"top-left":{top:e,bottom:null,left:e,right:null},bottom:{top:null,bottom:e,left:e,right:e},"bottom-right":{top:null,bottom:e,left:null,right:e},"bottom-left":{top:null,bottom:e,left:e,right:e}},g=f[d.position];return"object"==typeof d.padding&&(g=a.extend(g,d.padding)),"body"!=this.selector&&a(this.selector).css("position","relative"),c=a("<div></div>").css(a.extend({position:"absolute","z-index":3e3},g)),a(this.root).append(c),this},this.add=function(d,e){function f(){null!=k&&(k.animate({opacity:0},i.hideDuration,i.hideEasing),k.slideUp(i.hideEasing,function(){h.emit("hide",[d]),k.remove(),k=null}))}function g(){return-1!=i.position.indexOf("top-")?!0:!1}var h=this,i=this.options,j=isNaN(e)?i.timeout:e,k=a(this.tpl.alarm(d)).css({"margin-bottom":i.distance});("top"==i.position||"bottom"==i.position)&&k.outerWidth(c.width()-3*("object"==typeof i.padding&&i.padding.right?i.padding.right:b)),g()?c.prepend(k):c.append(k);var l=k.css("opacity");k.css({opacity:0}).animate({opacity:l},i.showDuration,i.showEasing,function(){h.emit("show",[d])}),this.addEvent(k,"click",function(a){return h.emit("select",[d,a]),f(),!1}),j>0&&setTimeout(f,j)},this.reset=function(){c.empty()}};return c.setting=function(){return{options:{position:"top-right",padding:b,distance:5,timeout:3e3,showDuration:500,hideDuration:500,showEasing:"swing",hideEasing:"linear"},valid:{add:["object","integer"]}}},c}),jui.defineUI("ui.paging",["jquery"],function(a){var b=function(){function b(b){b.addEvent(a(b.root).find(".prev"),"click",function(){return b.prev(),!1}),b.addEvent(a(b.root).find(".next"),"click",function(){return b.next(),!1})}function c(b){b.addEvent(h.find(".page"),"click",function(c){var d=parseInt(a(c.currentTarget).text());return b.page(d),!1})}function d(b,c){var d=h.find(".page");d.each(function(){a(this).text()==c?a(this).addClass("active"):a(this).removeClass("active")})}function e(a,e){var i=[],j=g<a.options.screenCount?g:a.options.screenCount,k=e-Math.ceil(j/2)+1,k=1>k?1:k;if(f=e>g?g:e,f=1>e?1:e,k+j+1>g){for(var l=g-j+1;g+1>l;l++)i.push(l);f>g&&(f=g)}else for(var l=k;k+j>l;l++)i.push(l);h.html(a.tpl.pages({pages:i,lastPage:g})),b(a),c(a),d(a,f)}var f=1,g=1,h=null;this.init=function(){{var b=this;this.options}return h=a(b.root).find(".list"),h=0==h.size()?a(b.root):h,this.reload(),this},this.reload=function(a){var a=a?a:this.options.count;f=1,g=Math.ceil(a/this.options.pageCount),e(this,f),this.emit("reload")},this.page=function(a){return a?(e(this,a),void this.emit("page",[f])):f},this.next=function(){this.page(f+1)},this.prev=function(){this.page(f-1)},this.first=function(){this.page(1)},this.last=function(){this.page(g)}};return b.setting=function(){return{options:{count:0,pageCount:10,screenCount:5},valid:{reload:["integer","null"],page:["integer","null"]}}},b}),jui.defineUI("ui.tooltip",["jquery"],function(a){var b=function(){function b(b,d){f=a(b.tpl.message({timestamp:b.timestamp,position:b.options.position,color:b.options.color,title:d})),b.options.width&&f.css("max-width",b.options.width),b.options.align&&f.css("text-align",b.options.align),a("body").append(f),c(b)}function c(b){var c=a(b.root).offset(),d=a(b.root).outerWidth(),e=a(b.root).outerHeight(),h=f.outerWidth(),i=f.outerHeight(),j=0,k=0,l=b.options.position;"left"==l?(j=c.left-h,k=c.top-(i-e)/2):"right"==l?(j=c.left+d,k=c.top-(i-e)/2):"bottom"==l?(j=c.left-h/2+d/2,k=c.top+e):(j=c.left-h/2+d/2,k=c.top-i),g={x:1>j?1:j,y:1>k?1:k}}function d(a,b){clearTimeout(i),null!=f&&(f.remove(),f=null,g={}),null!=i&&(a.emit("hide",[b]),i=null)}function e(a,c){f&&d(a,c);var e=a.options.title?a.options.title:h;""!=e&&(b(a,e),f.css({left:g.x,top:g.y}))}var f=null,g={},h="",i=null;this.init=function(){var b=this,c=this.options;h=a(this.root).attr("title"),a(this.root).removeAttr("title"),a(this.root).unbind(c.showType).unbind(c.hideType),this.addEvent(this.root,c.showType,function(a){return null==i?i=setTimeout(function(){e(b,a),null!=f&&b.emit("show",[f.get(0),a])},c.delay):c.showType==c.hideType&&d(b,a),!1}),c.showType!=c.hideType&&this.addEvent(this.root,c.hideType,function(a){return d(b,a),!1})}};return b.setting=function(){return{options:{color:"black",position:"top",width:150,align:"left",delay:0,showType:"mouseover",hideType:"mouseout",title:"",tpl:{message:"<div class='tooltip tooltip-<!= position !> tooltip-<!= color !>'><div class='anchor'></div><div class='title'><!= title !></div></div>"}}}},b}),jui.defineUI("ui.layout",["jquery","util.base"],function(a){var b=function(){function b(b,c,d,e){b.mousedown(function(f){b.data("mousedown",!0);var g=b.clone();b.data("shadow",g),b.after(g),d.call(this,f),g.css("opacity",.3),a(document).on("mousemove",c),a(document).on("mouseup",function h(d){a(document).off("mousemove",c),a(document).off("mouseup",h),e.call(this,d),b.data("mousedown",!1),g.remove(),a("body :not(.resize)").css({"user-select":""})}),a("body :not(.resize)").css({"user-select":"none"})})}function c(a){var c,d;c=e[a],d=c.resizer,d.css({cursor:h[a]}),d.data("event")||("top"==a?b(d,function(a){if(d.data("mousedown")){var b=a.clientY-d.data("current"),c=f.top.min,e=f.top.max;b>=c&&e>b&&d.css({top:b+"px"})}},function(a){var b=d.position().top;d.data("current",a.clientY-b)},function(){var a=d.position().top,b=(d.height(),a),c=a+d.height()+"px",f=e.top.height();e.top.height(b);var g=f-b,h=e.center.height()+g;e.center.css({top:c}).height(h),e.left.css({top:c}).height(h),e.left.resizer.css({top:c}).height(h),e.right.css({top:c}).height(h),e.right.resizer.css({top:c}).height(h)}):"bottom"==a?b(d,function(a){if(d.data("mousedown")){var b=a.clientY-d.data("current"),e=f.bottom.min,g=f.bottom.max,h=c.position().top-(b+f.barSize),i=h+c.height();i>=e&&g>=i&&d.css({top:b+"px"})}},function(a){var b=d.position().top;d.data("current",a.clientY-b)},function(){var a=d.position().top+d.height(),b=(e.root.height(),parseFloat(e.bottom.position().top)-a);e.bottom.css({top:a+"px"}),e.bottom.height(e.bottom.height()+b);var c=e.center.height()-b;e.center.height(c),e.left.height(c),e.left.resizer.height(c),e.right.height(c),e.right.resizer.height(c)}):"left"==a?b(d,function(a){if(d.data("mousedown")){var b=a.clientX-d.data("current"),c=f.left.min,e=f.left.max;b>=c&&e>b&&d.css({left:b+"px"})}},function(a){var b=d.position().left;d.data("left",b).data("current",a.clientX-b)},function(){if(d.data("mousedown")){var a=d.position().left,b=d.data("left"),c=b-a;e.left.css({width:a+"px"}),e.center.css({left:a+f.barSize+"px"}),e.center.width(e.center.width()+c)}}):"right"==a&&b(d,function(a){if(d.data("mousedown")){var b=a.clientX-d.data("current"),g=f.right.min,h=f.right.max,i=e.left.width()+e.left.resizer.width(),j=e.center.width(),k=c.width()-(b-(i+j));k>=g&&h>k&&d.css({left:b+"px"})}},function(a){var b=d.position().left;d.data("left",b).data("current",a.clientX-b)},function(){if(d.data("mousedown")){var a=d.position().left,b=d.data("left"),c=b-a;e.right.css({left:a+d.width()+"px",width:e.right.width()+c+"px"}),e.center.width(e.center.width()-c)}}),d.data("event",!0))}function d(b){for(var d=0,h=g.length;h>d;d++){var i=e[g[d]];i&&(e.root.append(i),"center"!=g[d]&&f[g[d]].resize&&(i.resizer||(i.resizer=a("<div class='resize "+g[d]+"' />")),e.root.append(i.resizer),c(g[d])))}b.resize()}var e=null,f={},g=["top","left","right","bottom","center"],h={top:"n-resize",bottom:"n-resize",right:"e-resize",left:"e-resize"};this.init=function(){var b,c,g,h,i,j,k=this,l=this.options;return b=a(this.root).css("position","relative"),null!=l.width&&b.outerWidth(l.width),null!=l.height&&b.outerHeight(l.height),c=l.top.el?a(l.top.el):b.find("> .top"),0==c.length&&(c=null),g=l.left.el?a(l.left.el):b.find("> .left"),0==g.length&&(g=null),h=l.right.el?a(l.right.el):b.find("> .right"),0==h.length&&(h=null),i=l.bottom.el?a(l.bottom.el):b.find("> .bottom"),0==i.length&&(i=null),j=l.center.el?a(l.center.el):b.find("> .center"),0==j.length&&(j=null),e={root:b,top:c,left:g,right:h,bottom:i,center:j},f=l,d(this),a(window).on("resize",function(){k.resize()}),this},this.resize=function(){var a=null,b=null,c=0,d=0,f=0;a=e.top,b=this.options.top,a&&(a.css({position:"absolute",top:"0px",left:"0px",width:"100%",height:b.size||b.min}),c=a.height(),b.resize?(a.resizer.css({position:"absolute",top:c,left:"0px",width:"100%",background:this.options.barColor,height:this.options.barSize}),c+=this.options.barSize):a.resizer&&a.resizer.remove()),a=e.bottom,b=this.options.bottom;var g=e.root.height();if(a){a.css({position:"absolute",left:"0px",width:"100%",height:b.size||b.min});var h=c-a.height()+c;b.resize?(a.resizer.css({position:"absolute",top:h,left:"0px",width:"100%",background:this.options.barColor,height:this.options.barSize}),h+=this.options.barSize):a.resizer&&a.resizer.remove(),a.css("top",h+"px")}a=e.left,b=this.options.left;var i=g;e.top&&(i-=e.top.height(),e.top.resizer&&(i-=e.top.resizer.height())),e.bottom&&(i-=e.bottom.height(),e.bottom.resizer&&(i-=e.bottom.resizer.height())),a&&(a.css({position:"absolute",top:c,left:"0px",height:i,width:b.size||b.min,"max-width":"100%",overflow:"auto"}),d=a.width(),b.resize?(a.resizer.css({position:"absolute",top:c,height:a.height(),left:d,background:this.options.barColor,width:this.options.barSize}),d+=this.options.barSize):a.resizer&&a.resizer.remove()),a=e.right,b=this.options.right;var j=e.root.width(),k=j;e.left&&(k-=e.left.width(),e.left.resizer&&(k-=e.left.resizer.width())),a&&(a.css({position:"absolute",top:c,height:i,width:b.size||b.min,"max-width":"100%"}),b.resize?(a.resizer.css({position:"absolute",top:c,height:a.height(),background:this.options.barColor,width:this.options.barSize}),f+=this.options.barSize):a.resizer&&a.resizer.remove(),k-=e.right.width(),e.right.resizer&&(k-=e.right.resizer.width()),a.resizer.css({left:d+k+"px"}),a.css({left:d+k+a.resizer.width()+"px"})),a=e.center,b=this.options.center,a&&a.css({position:"absolute",top:c,height:i,left:d,width:k,overflow:"auto"})}};return b.setting=function(){return{options:{barColor:"#d6d6d6",barSize:3,width:null,height:null,top:{el:null,size:null,min:50,max:200,resize:!0},left:{el:null,size:null,min:50,max:200,resize:!0},right:{el:null,size:null,min:50,max:200,resize:!0},bottom:{el:null,size:null,min:50,max:200,resize:!0},center:{el:null}}}},b}),jui.defineUI("uix.autocomplete",["jquery","util.base","ui.dropdown"],function(a,b,c){var d=function(){function b(b,d){if(0==d.length)return void(f&&f.hide());f&&a(f.root).remove();var e=a(b.root).offset(),h=a(b.tpl.words({words:d}));a("body").append(h),f=c(h,{keydown:!0,width:a(b.root).outerWidth(),left:e.left,top:e.top+a(b.root).outerHeight(),event:{change:function(c,d){a(g).val(c.text),b.emit("change",[c.text,d])}}}),f.show()}function d(a,b){var c=a.options.words,d=[];if(""!=b)for(var e=0;e<c.length;e++){var f=c[e],g=c[e].toLowerCase(),h=b.toLowerCase();-1!=g.indexOf(h)&&d.push(f)}return d}function e(c){c.addEvent(g,"keyup",function(e){return 38!=e.which&&40!=e.which&&13!=e.which?(h=d(c,a(this).val()),b(c,h),!1):void 0})}var f=null,g=null,h=[];this.init=function(){var b=this.options;g=null==b.target?this.root:a(this.root).find(b.target),e(this)},this.update=function(a){this.options.words=a},this.list=function(){return h}};return d.setting=function(){return{options:{target:null,words:[]},valid:{update:["array"]}}},d}),jui.defineUI("uix.tab",["jquery","util.base","ui.dropdown"],function(a,b,c){var d=function(){function b(b){var c=a(b.root).children("li");c.removeClass("active")}function d(b,c){var d=a(c).offset();a(c).parent().addClass("menu-keep"),k.show(d.left,d.top+a(b.root).height())}function e(b){var c=a(b.root).children("li"),d=c.eq(m);d.removeClass("menu-keep")}function f(c,d){b(c);var e=a(c.root).children("li"),f=e.eq(d).addClass("active");l.appendTo(f),g(c.options.target,f[0])}function g(b,c){var d=a(c).find("[href*=#]").attr("href");a(b).children("*").each(function(){var b=this;"#"+b.id==d?a(b).show():a(b).hide()})}function h(b){a(b.root).children("li").each(function(c){a(this).hasClass("menu")&&(m=c),b.addEvent(this,["click","contextmenu"],function(e){var h=a.trim(a(this).text()),i=a(this).val();if(c!=m){if(c!=n){var j=[{index:c,text:h,value:i},e];"click"==e.type?(""!=b.options.target&&g(b.options.target,this),n=c,b.emit("change",j),b.emit("click",j),f(b,c)):"contextmenu"==e.type&&b.emit("rclick",j)}}else b.emit("menu",[{index:c,text:h},e]),"show"!=k.type&&d(b,this);return!1})}),j(b),i(b)}function i(b){if(b.options.drag){var c=a(b.root).children("li"),d=null,e=null,f=null,g=null;c.each(function(h){b.addEvent(this,"mousedown",function(c){return d=a(this),e=d.clone().css("opacity","0.5"),f=h,b.emit("dragstart",[f,c]),!1}),b.addEvent(this,"mousemove",function(){null!=f&&(g=h,f>g?0==g?e.insertBefore(c.eq(0)):e.insertAfter(c.eq(g-1)):g==c.size()-1?e.insertAfter(c.eq(g)):e.insertBefore(c.eq(g+1)),d.hide())})}),b.addEvent(b.root,"mouseup",function(a){null!=d&&d.show(),null!=e&&e.remove(),null!=f&&null!=g&&(b.move(f,g),b.emit("dragend",[g,a])),f=null,g=null})}}function j(b){var c=a(b.root).children("li"),d=c.filter(".active"),e=c.eq(n),g=1==e.size()?e:d;0==g.size()&&(g=c.eq(0)),l.appendTo(g),f(b,c.index(g))}var k=null,l=null,m=-1,n=0;this.init=function(){var b=this,d=this.options;if(n=d.index,l=a("<div class='anchor'></div>"),d.nodes.length>0?this.update(d.nodes):h(this),this.tpl.menu){var f=a(this.tpl.menu());f.insertAfter(a(b.root)),k=c(f,{event:{change:function(a,c){e(b),b.emit("changeMenu",[a,c])},hide:function(){e(b)}}})}return this},this.update=function(b){if(this.tpl.node){a(this.root).empty();for(var c=0;c<b.length;c++)a(this.root).append(this.tpl.node(b[c]));h(this)}},this.insert=function(b,c){if(this.tpl.node){var d=this.tpl.node(c),e=a(this.root).children("li");b==e.size()?a(d).insertAfter(e.eq(b-1)):a(d).insertBefore(e.eq(b)),h(this)}},this.append=function(b){if(this.tpl.node){var c=this.tpl.node(b);-1!=m?(a(c).insertBefore(a(this.root).find(".menu")),m++):a(this.root).append(c),h(this)}},this.prepend=function(b){this.tpl.node&&(a(this.root).prepend(this.tpl.node(b)),h(this))},this.remove=function(b){a(this.root).children("li").eq(b).remove(),h(this)},this.move=function(b,c){if(b!=c){var d=a(this.root).children("li"),e=d.eq(b);b>c?0==c?e.insertBefore(d.eq(0)):e.insertAfter(d.eq(c-1)):c==d.size()-1?e.insertAfter(d.eq(c)):e.insertBefore(d.eq(c+1)),n=c,h(this)}},this.show=function(b){if(b!=m&&b!=n){n=b;var c=a(this.root).children("li").eq(b);this.emit("change",[{index:b,text:a.trim(c.text()),value:c.val()}]),f(this,b)}},this.activeIndex=function(){return n}};return d.setting=function(){return{options:{target:"",index:0,drag:!1,nodes:[]},valid:{update:["array"],insert:["integer","object"],append:["object"],prepend:["object"],remove:["integer"],show:["integer"]}}},d}),jui.define("uix.table.column",["jquery"],function(a){var b=function(b){this.element=null,this.order="asc",this.name=null,this.data=[],this.list=[],this.index=b,this.type="show",this.width=null,this.hide=function(){this.type="hide",a(this.element).hide()},this.show=function(){this.type="show",a(this.element).show()}};return b}),jui.define("uix.table.row",["jquery"],function(a){var b=function(b,c,d){function e(a){k.rownum=isNaN(a)?k.rownum:a,k.index=k.parent?k.parent.index+"."+k.rownum:""+k.rownum,k.parent&&"string"==typeof k.index&&(k.depth=k.index.split(".").length-1),k.isLeaf()||f(k)}function f(a){for(var b=a.childrens,c=0;c<b.length;c++)b[c].reload(c),b[c].isLeaf()||f(b[c])}function g(){k.list=[],a(k.element).find("td").each(function(a){k.list[a]=this,l[a]&&(this.style.display="none")})}function h(){if(!c)return k.element;var b=a(c(a.extend({row:{index:k.index,data:k.data,depth:k.depth}},k.data))).get(0);return b}function i(b){a(b.element).remove();for(var c=0;c<b.childrens.length;c++){var d=b.childrens[c];d.isLeaf()?a(d.element).remove():i(d)}}function j(){for(var a=0;a<k.childrens.length;a++)k.childrens[a].reload(a)}var k=this,l={};this.data=b,this.rownum=null,this.index=null,this.element=null,this.list=[],this.parent=d?d:null,this.childrens=[],this.depth=0,this.type="fold",this.reload=function(b,c,d){if(c||e(b),null!=this.element){var f=h();a(f).insertAfter(this.element),a(this.element).remove(),this.element=f}else this.element=h();null!=d&&this.hideCells(d),g()},this.destroy=function(){null!=this.parent?this.parent.removeChild(this.index):(i(this),a(this.element).remove())},this.isLeaf=function(){return 0==this.childrens.length?!0:!1},this.fold=function(){this.type="fold";for(var b=0;b<this.childrens.length;b++){var c=this.childrens[b];a(c.element).hide(),c.isLeaf()||c.fold()}},this.open=function(){this.type="open";for(var b=0;b<this.childrens.length;b++){var c=this.childrens[b];a(c.element).show(),c.isLeaf()||c.open()}},this.appendChild=function(b){var c=this.isLeaf()?this.element:this.lastChildLeaf().element;a(b.element).insertAfter(c),this.childrens.push(b)},this.insertChild=function(b,c){var d=this.element;if(b>0){var e=this.childrens[b-1];d=e.isLeaf()&&this.childrens.length!=b+1?e.element:e.lastChildLeaf().element}a(c.element).insertAfter(d);var f=this.childrens.splice(0,b);f.push(c),this.childrens=f.concat(this.childrens),j()},this.removeChild=function(a){for(var b=0;b<this.childrens.length;b++){var c=this.childrens[b];c.index==a&&(this.childrens.splice(b,1),i(c))}j()},this.lastChild=function(){return this.isLeaf()?null:this.childrens[this.childrens.length-1]},this.lastChildLeaf=function(a){var b=a?a:this.lastChild();return b.isLeaf()?b:this.lastChildLeaf(b.lastChild())},this.showCell=function(b){l[b]=!1,a(this.list[b]).show()},this.hideCell=function(b){l[b]=!0,a(this.list[b]).hide()},this.hideCells=function(a){for(var b=0;b<a.length;b++)"hide"==a[b].type&&this.hideCell(b)}};return b}),jui.define("uix.table.base",["jquery","util.base","uix.table.column","uix.table.row"],function(a,b,c,d){var e=function(e,f){function g(){r(),h()}function h(){var b=[];t.thead.find("tr:last > th").each(function(){b.push(this)});for(var d=0;d<b.length;d++){var e=new c(d);v[d]?(e.element=v[d].element,e.order=v[d].order,e.name=v[d].name,e.data=v[d].data,e.list=v[d].list,e.type=v[d].type,e.width=v[d].width):(e.element=b[d],(a(e.element).attr("width")||a(e.element).attr("style")&&-1!=a(e.element).attr("style").indexOf("width"))&&(e.width=a(e.element).outerWidth()),f&&f[d]&&(e.name=f[d]));for(var g=0;g<w.length;g++)e.list.push(w[g].list[d]),e.data.push(w[g].data[e.name]);v[d]=e}}function i(a,b){if("reload"==a||"append"==a)for(var c=0;c<v.length;c++)v[c].list[b.index]=b.list[c],v[c].data[b.index]=b.data[v[c].name];else if("remove"==a)for(var c=0;c<v.length;c++)v[c].list.splice(b.index,1),v[c].data.splice(b.index,1);else h()}function j(a,b,c){var e=new d(a,u.row,c);return e.reload(b,!1,v),e}function k(a,b){var c=b.childrens;if(c.length>0)for(var d=0;d<c.length;d++)a.push(c[d]),c[d].childrens.length>0&&k(a,c[d])}function l(a,b){if(!b)return null;var c=a.shift();return void 0==c?b:l(a,b.childrens[c])}function m(){var a=arguments[0],b=arguments[1];"function"==typeof a?(b=a,a=0):a=isNaN(a)?0:a;for(var c=a;c<w.length;c++)w[c].reload(c),i("reload",w[c]),"function"==typeof b&&b(c)}function n(b,c){var d=j(c,b),e=d;if(w.length!=b||0==b&&1==w.length)a(d.element).insertBefore(w[b].element);else{var f=w[b-1];a(d.element).insertAfter(0==f.childrens.length?f.element:f.lastChildLeaf().element)}return e=w.splice(0,b),e.push(d),w=e.concat(w),m(b),d}function o(a,b){var c=z.getIndexList(a),d=s.getRowParent(a),e=c[c.length-1];return row=j(b,e,d),d.insertChild(e,row),row}function p(a){var b=j(a,w.length);return w.push(b),t.tbody.append(b.element),i("append",b),b}function q(a,b){var c=s.getRow(a),d=j(b,c.childrens.length,c);return c.appendChild(d),d}function r(){return"function"!=typeof u.none?!1:(y?w.length>0&&(t.tbody.find("tr:first").remove(),y=!1):0==w.length&&(t.tbody.html(u.none()),y=!0),!0)}var s=this,t=e.$obj,u=e.$tpl,v=[],w=[],x={},y=!1,z=b.index();this.appendRow=function(){var a=arguments[0],b=arguments[1],c=null;return c=b?q(a,b):p(a),r(),c},this.insertRow=function(a,b){var c=null;return c=z.isIndexDepth(a)?o(a,b):0==w.length&&0==parseInt(a)?this.appendRow(b):n(a,b),r(),c},this.updateRow=function(a,b){var c=this.getRow(a);for(var d in b)c.data[d]=b[d];return c.reload(null,!0),i("reload",c),c},this.moveRow=function(a,c){if(a!=c){var d=this.getRowAll(a),e=d[0],f=b.clone(e.data);if(d.length>1)for(var g=0;g<d.length;g++){var a=z.changeIndex(d[g].index,c,d[0].index);this.insertRow(a,d[g].data)}else this.insertRow(c,f);this.removeRow(e.index)}},this.removeRow=function(a){var b=this.getRow(a);z.isIndexDepth(a)?b.destroy():(b.destroy(),i("remove",w[a]),w.splice(a,1),m(a)),r()},this.openRow=function(a){this.getRow(a).open(),x[a]=!1;for(var b in x)if(x[b]!==!1){var c=this.getRow(x[b]);null!=c&&c.fold()}},this.openRowAll=function(){for(var a=this.getRowAll(),b=0;b<a.length;b++)a[b].isLeaf()||(a[b].open(),x[a[b].index]=!1)},this.foldRow=function(a){this.getRow(a).fold(),x[a]=a},this.foldRowAll=function(){for(var a=this.getRowAll(),b=0;b<a.length;b++)a[b].isLeaf()||(a[b].fold(),x[a[b].index]=a[b].index)},this.removeRows=function(){w=[],r()||t.tbody.html(""),i()},this.sortRows=function(a,c){function d(b){var c=b.data[a];return"string"==typeof c?c.toLowerCase():isNaN(c)||null==c?"":c}var e=b.sort(w);e.setCompare(c?function(a,b){return d(a)>d(b)?!0:!1}:function(a,b){return d(a)<d(b)?!0:!1}),e.run(),t.tbody.html(""),m(function(a){t.tbody.append(w[a].element)})},this.appendColumn=function(b,c){var d=v.length,e=a(u[b]({rows:c})),f=e.filter("thead").find("tr");f.each(function(b){var c=t.thead.find("tr").eq(b);a(this).find("th").each(function(){c.append(this),f.size()-1==b&&v.push({element:this,list:[]})})});for(var g=0;g<w.length;g++)e.filter("tbody").find("tr").eq(g).find("td").each(function(b){a(w[g].element).append(this),v[d+b].list.push(this),w[g].list.push(this),a.extend(w[g].data,c[g])})},this.removeColumn=function(b){for(var c=0;c<v[b].list.length;c++)a(v[b].element).remove(),a(v[b].list[c]).remove();for(var d=0;d<w.length;d++)w[d].list.splice(b,1);v.splice(b,1)},this.hideColumn=function(a){if("hide"!=v[a].type){for(var b=this.getRowAll(),c=0;c<b.length;c++)b[c].hideCell(a);v[a].hide()}},this.showColumn=function(a){if("show"!=v[a].type){for(var b=this.getRowAll(),c=0;c<b.length;c++)b[c].showCell(a);v[a].show()}},this.getColumnCount=function(){return v.length},this.getRowCount=function(){return w.length},this.getColumn=function(a){return null==a?v:v[a]},this.getRow=function(a){if(null==a)return w;if(z.isIndexDepth(a)){var b=z.getIndexList(a);return l(b,w[b.shift()])}return w[a]?w[a]:null},this.getRowAll=function(a){for(var b=[],c=null==a?w:[this.getRow(a)],d=0;d<c.length;d++)c[d]&&(b.push(c[d]),c[d].childrens.length>0&&k(b,c[d]));return b},this.getRowParent=function(a){return z.isIndexDepth(a)?this.getRow(z.getParentIndex(a)):null},this.setColumn=function(a,b){v[a]=b},this.setRow=function(a,b){w[a]=b},this.printInfo=function(){console.log(v),console.log(w)},g()};return e}),jui.defineUI("uix.table",["jquery","util.base","ui.dropdown","uix.table.base"],function(a,b,c,d){b.resize(function(){for(var a=jui.get("table"),b=0;b<a.length;b++)for(var c=a[b].list,d=0;d<c.length;d++)c[d].resize()},1e3);var e=function(){function e(a){return"<tr class='expand' style='display: none;'><td id='EXPAND_"+a.timestamp+"'></td></tr>"}function f(a,b){for(var c=[],d=0;d<b.length;d++)if("string"==typeof b[d]){var e=a.getColumn(b[d]);c.push(e.index)}else c.push(b[d]);return c}function g(b){var c=b.options.colshow,d=b.uit.getColumnCount();if(c===!0){b.options.colshow=c=[];for(var e=0;d>e;e++)c.push(e)}else c=f(b,c);for(var e=0;d>e;e++)-1==a.inArray(e,c)?b.uit.hideColumn(e):b.uit.showColumn(e)}function h(b){for(var d=null,e=b.listColumn(),f=[],g=0;g<e.length;g++)f.push(a(e[g].element).text());d=a(b.tpl.menu({columns:f})),a("body").append(d),s=c(d,{close:!1}),a(s.root).find("input[type=checkbox]").each(function(c){this.checked="show"==e[c].type?!0:!1,b.addEvent(this,"click",function(d){var e=a(s.root).find("input[type=checkbox]:checked").size();this.checked?b.showColumn(c,d):e>0?b.hideColumn(c,d):this.checked=!0,b.hideExpand(),b.scroll()})})}function i(c){for(var d=r.table.outerWidth(),e=c.uit.getColumnCount(),f=!1,g=e-1;g>=0;g--){var h=c.getColumn(g),i=a(h.element).outerWidth();"none"==a(h.element).css("display")||f||(i-=b.scrollWidth(),f=!0),a(h.list[0]).outerWidth(i)}r.tbody.outerWidth(d)}function j(b){a(b.root).hasClass("table-scroll")||b.scroll(),r.tbody.unbind("scroll").scroll(function(a){return r.tbody.scrollTop()+b.options.scrollHeight==r.tbody.get(0).scrollHeight?(b.emit("scroll",a),!1):void 0})}function k(a,b){a.uit.getRowCount()<1||(b&&(a.options.expand&&r.tbody.prepend(e(a)),a.scroll()),a.options.scroll&&j(a),a.setVo())}function l(a,b){for(var b=b?b:a.uit.getRow(),c=0;c<b.length;c++)!function(b){b.childrens.length>0?(m(a,b),l(a,b.childrens)):m(a,b)}(b[c])}function m(b,c){if(b.addEvent(c.element,"click",function(a){if(b.emit("select",[c,a]),b.emit("click",[c,a]),b.options.expand){if(b.options.expandEvent===!1)return;t===c.index?b.hideExpand(a):(null!=t&&b.hideExpand(a),b.showExpand(c.index,void 0,a))}}),b.addEvent(c.element,"dblclick",function(a){b.emit("dblclick",[c,a])}),b.addEvent(c.element,"contextmenu",function(a){return b.emit("rowmenu",[c,a]),!1}),b.options.fields&&b.options.editCell){if(b.options.editEvent===!1)return;a(c.element).find("td").each(function(a){var d=this;!function(a){b.addEvent(d,"dblclick",function(d){"TD"==d.target.tagName&&n(b,d.currentTarget,c,a),b.emit("editstart",[c,d])})}(a)})}if(b.options.fields&&b.options.editRow){if(b.options.editEvent===!1)return;b.addEvent(c.element,"dblclick",function(a){("TD"==a.target.tagName||"TR"==a.target.tagName)&&b.showEditRow(c.index,a)})}}function n(b,c,d,e,g,h){function i(){if("function"==typeof h)h();else{var a={};a[j.name]=m.val();var c=b.emit("editend",[a]);c!==!1&&(b.update(d.index,a),m.remove())}}var j=b.getColumn(e),k=j.name?j.data[d.index]:a(c).html(),l=h?b.options.editRow:b.options.editCell,m=a("<input type='text' class='edit' />").val(k).css("width","100%");a(c).html(m),(!j.name||l!==!0&&-1==a.inArray(e,f(b,l)))&&m.attr("disabled",!0),g&&g.target==c&&m.focus(),b.addEvent(m,"keypress",function(a){13==a.which&&i(a)}),b.addEvent(r.tbody.find("tr"),"click",function(a){("TD"==a.target.tagName||"TR"==a.target.tagName)&&i(a)})}function o(a){for(var b=a.options,c=a.uit.getColumnCount(),d=0;c>d;d++){var e=a.getColumn(d);!function(c,d){b.fields&&b.sort&&b.sortEvent===!0||a.addEvent(d.element,"click",function(b){a.emit("colclick",[d,b])}),a.addEvent(d.element,"dblclick",function(b){a.emit("coldblclick",[d,b])}),a.addEvent(d.element,"contextmenu",function(b){return a.emit("colmenu",[d,b]),!1})}(d,e)}}function p(b){for(var c=b.options.sort,d=c===!0?b.uit.getColumnCount():c.length,e=0;d>e;e++){var f=c===!0?e:c[e],g=b.getColumn(f);null!=g.element&&(!function(c,d){b.addEvent(d.element,"click",function(e){a(e.target).hasClass("resize")||(b.sort(c,void 0,e),b.emit("colclick",[d,e]))})}(f,g),a(g.element).css("cursor","pointer"))}}function q(c){function d(b){for(var d=b+1;d<c.uit.getColumnCount();d++){var e=c.getColumn(d).element;if(!a(e).is(":hidden"))return c.getColumn(d)}}function e(c,d){var e=30;if(!(e>j+d||e>k-d)&&(a(h.element).outerWidth(j+d),a(i.element).outerWidth(k-d),c.options.scroll)){var f=a(i.element).outerWidth()-(h.index==c.uit.getColumnCount()-2?b.scrollWidth():0);a(h.list[0]).outerWidth(a(h.element).outerWidth()),a(i.list[0]).outerWidth(f)}}var f=0,g=r.table.offset(),h=null,i=null,j=0,k=0,l=null;r.thead.find(".resize").remove();for(var m=0;m<c.uit.getColumnCount()-1;m++){var n=a(c.getColumn(m).element),o=a("<div class='resize'></div>"),p=n.offset();o.css({position:"absolute",width:"8px",height:n.outerHeight(),left:n.outerWidth()+(p.left-g.left)-1+"px",top:p.top-g.top+"px",cursor:"w-resize","z-index":"1"}),n.append(o),function(b){c.addEvent(o,"mousedown",function(e){return 0==f&&(f=e.pageX),h=c.getColumn(b),i=d(b),j=a(h.element).outerWidth(),k=a(i.element).outerWidth(),l=this,v=!0,!1})}(m)}c.addEvent("body","mousemove",function(a){f>0&&e(c,a.pageX-f)}),c.addEvent("body","mouseup",function(b){if(f>0){f=0,v=!1;var d=a(h.element).offset().left-g.left;return a(l).css("left",a(h.element).outerWidth()+d-1),c.emit("colresize",[h,b]),!1}})}var r=null,s=null,t=null,u={},v=!1;this.init=function(){var b=this.options;if(b.data=null!=b.rows?b.rows:b.data,r={table:a(this.root),thead:a(this.root).find("thead"),tbody:a(this.root).find("tbody")},this.uit=new d({$obj:r,$tpl:this.tpl},b.fields),b.fields&&b.colshow&&g(this),b.fields&&this.tpl.menu&&h(this),b.resize&&q(this),b.fields&&b.sort&&b.sortEvent===!0&&p(this),b.data.length>0?this.update(b.data):this.setVo(),b.width>0&&r.table.outerWidth(b.width),!b.fields&&(b.sort||b.colshow||b.editCell||b.editRow))throw new Error("JUI_CRITICAL_ERR: 'fields' option is required");o(this)},this.update=function(){var a=1==arguments.length?arguments[0]:arguments[1],b=2==arguments.length?arguments[0]:null;if(null!=b){var c=this.uit.updateRow(b,a);m(this,c),0==parseInt(b)&&this.scroll()}else this.uit.removeRows(),this.scroll(),this.append(a),this.options.sortIndex&&this.sort(this.options.sortIndex,this.options.sortOrder,null)},this.updateTree=function(a){var c=b.index();this.uit.removeRows();for(var d=0;d<a.length;d++){var e=c.getParentIndex(a[d].index);null==e?this.uit.appendRow(a[d].data):this.uit.appendRow(e,a[d].data)}k(this,!0),l(this)},this.append=function(){var a=this.count()>0?!1:!0,b=1==arguments.length?arguments[0]:arguments[1],c=2==arguments.length?arguments[0]:null;b=void 0==b.length?[b]:b;for(var d=0;d<b.length;d++){var e=null;e=null!=c?this.uit.appendRow(c,b[d]):this.uit.appendRow(b[d]),a||m(this,e)}k(this,a),a&&l(this)},this.insert=function(a,b){for(var c=this.count()>0?!1:!0,b=void 0==b.length?[b]:b,d=0;d<b.length;d++)this.uit.insertRow(a,b[d]);k(this,c),l(this)},this.select=function(b){var c=this.get(b);return this.hideExpand(),this.hideEditRow(),this.uncheckAll(),a(c.element).parent().find(".selected").removeClass("selected"),a(c.element).addClass("selected"),t=b,c},this.unselect=function(){if(null!=t){var b=this.get(t);return a(b.element).removeClass("selected"),t=null,b}},this.check=function(b){var c=this.get(b);this.hideExpand(),this.hideEditRow(),this.unselect(),u[b]=c,a(c.element).addClass("checked")},this.uncheck=function(b){var c=this.get(b);u[b]=null,a(c.element).removeClass("checked")},this.uncheckAll=function(){u={},r.tbody.find(".checked").removeClass("checked")},this.remove=function(a){return null==a?null:(this.uit.removeRow(a),l(this),void this.scroll())},this.reset=function(){this.uit.removeRows(),this.scroll()},this.move=function(a,b){this.uit.moveRow(a,b),l(this),(0==parseInt(a)||0==parseInt(b))&&this.scroll()
},this.sort=function(a,b,c){if(this.options.fields&&this.options.sort&&!v){var d=this.getColumn(a);"string"==typeof d.name&&(d.order=b?b:"asc"==d.order?"desc":"asc",this.uit.setColumn(a,d),this.uit.sortRows(d.name,"desc"==d.order?!0:!1),this.emit("sort",[d,c]),k(this,!0),l(this))}},this.scroll=function(a){if(this.options.scroll){var b=this,c=a&&a>0?a:this.options.scrollHeight,c=c>0?c:200;this.options.scrollHeight=c,r.tbody.css("maxHeight",c+"px"),setTimeout(function(){r.tbody.outerHeight()<c?(r.table.css({"table-layout":""}),r.tbody.css({display:"",overflow:""})):(r.table.css({"table-layout":"fixed"}),r.tbody.css({display:"block",overflow:"auto"})),i(b)},10)}},this.open=function(a){null!=a&&(this.uit.openRow(a),this.emit("open",[this.get(a)]))},this.fold=function(a){null!=a&&(this.uit.foldRow(a),this.emit("fold",[this.get(a)]))},this.openAll=function(){this.uit.openRowAll(),this.emit("openall")},this.foldAll=function(){this.uit.foldRowAll(),this.emit("foldall")},this.resize=function(){this.scroll(),this.options.resize&&q(this)},this.resizeColumns=function(){for(var b=this.listColumn(),c=0;c<b.length;c++)null==b[c].width&&a(b[c].element).outerWidth("auto")},this.size=function(){return this.uit.getRowCount()},this.count=function(){return this.uit.getRowCount()},this.list=function(){return this.uit.getRow()},this.listAll=function(){return this.uit.getRowAll()},this.listChecked=function(){var a=[];for(var b in u)null!=u[b]&&a.push(u[b]);return a},this.listColumn=function(){return this.uit.getColumn()},this.get=function(a){return null==a?null:this.uit.getRow(a)},this.getAll=function(a){return null==a?null:this.uit.getRowAll(a)},this.getColumn=function(b){return null==b?null:this.uit.getColumn("string"==typeof b?a.inArray(b,this.options.fields):b)},this.showColumn=function(a,b){if(this.options.fields){var c=this.getColumn(a);this.uit.showColumn(c.index),this.scroll(),this.resizeColumns(),this.options.resize&&q(this),this.emit("colshow",[c,b])}},this.hideColumn=function(a,b){if(this.options.fields){var c=this.getColumn(a);this.uit.hideColumn(c.index),this.scroll(),this.resizeColumns(),this.options.resize&&q(this),this.emit("colhide",[c,b])}},this.initColumns=function(a){"object"==typeof a&&(this.options.colshow=a,g(this),this.scroll(),this.resizeColumns(),this.options.resize&&q(this))},this.showColumnMenu=function(b){if(this.options.fields&&s){var c=this.listColumn(),d=r.thead.offset(),e=d.left+r.table.outerWidth()-a(s.root).outerWidth();b=isNaN(b)||b>e+d.left?e:b,b=0>b?0:b,a(s.root).find("input[type=checkbox]").each(function(a){this.checked="show"==c[a].type?!0:!1}),s.move(b,d.top+r.thead.outerHeight()),s.show()}},this.hideColumnMenu=function(){this.options.fields&&s&&s.hide()},this.toggleColumnMenu=function(a){this.options.fields&&s&&("show"==s.type?this.hideColumnMenu():this.showColumnMenu(a))},this.showExpand=function(b,c,d){if(this.options.expand){this.unselect(),this.hideEditRow();var e="#EXPAND_"+this.timestamp,f=this.get(b),c="object"!=typeof c?a.extend({row:f},f.data):c,g=a(e).parent().show();r.tbody.find("tr").removeClass("open"),g.insertAfter(a(f.element).addClass("open")),a(e).attr("colspan",r.thead.find("tr:last > th:visible").size()).html(this.tpl.expand(c)),this.scroll(),this.setVo(),t=b,this.emit("expand",[f,d])}},this.hideExpand=function(b){if(this.options.expand&&null!=t){var c=this.get(t);a("#EXPAND_"+this.timestamp).parent().hide(),r.tbody.find("tr").removeClass("open"),this.scroll(),t=null,this.emit("expandend",[c,b])}},this.getExpand=function(){return this.options.expand?null==t?null:this.get(t):void 0},this.showEditRow=function(b,c){if(this.options.editRow){this.unselect(),this.hideExpand();var d=this,e=this.get(b),f=a(e.element).find("td");f.each(function(b){n(d,this,e,b,c,function(){var b={};f.each(function(c){var e=d.getColumn(c);null!=e.name&&(b[e.name]=a(this).find(".edit").val())});var c=d.emit("editend",[b]);c!==!1&&d.update(e.index,b)})}),t=b,d.emit("editstart",[e,c])}},this.hideEditRow=function(){if(this.options.editRow&&null!=t){var a=this.get(t);t=null,this.emit("editend",[a.data]),this.update(a.index,a.data)}},this.getEditRow=function(){return this.options.editRow?null==t?null:this.get(t):void 0},this.setCsv=function(){if(this.options.fields||this.options.csv){var a=1==arguments.length?arguments[0]:arguments[1],c=2==arguments.length?arguments[0]:null,d=b.getCsvFields(this.options.fields,this.options.csv),e=b.csvToData(d,a);if(null==c)this.update(e);else{this.reset();for(var f=0;f<e.length;f++){var g=e[f][c];g&&this.insert(g,e[f])}}}},this.setCsvFile=function(){if(this.options.fields||this.options.csv){var a=this,c=1==arguments.length?arguments[0]:arguments[1],d=2==arguments.length?arguments[0]:null;b.fileToCsv(c,function(b){null==d?a.setCsv(b):a.setCsv(d,b)})}},this.getCsv=function(a){if(this.options.fields||this.options.csv){for(var c=b.getCsvFields(this.options.fields,this.options.csv),d=[],e=a?this.listAll():this.list(),f=0;f<e.length;f++)d.push(e[f].data);return b.dataToCsv2({fields:c,rows:d,names:this.options.csvNames})}},this.getCsvBase64=function(a){return this.options.fields||this.options.csv?b.csvToBase64(this.getCsv(a)):void 0},this.downloadCsv=function(a,c){b.typeCheck("string",a)&&(a=a.split(".")[0]);var d=document.createElement("a");d.download=a?a+".csv":"table.csv",d.href=this.getCsvBase64(c),document.body.appendChild(d),d.click(),d.parentNode.removeChild(d)},this.activeIndex=function(){return t}};return e.setting=function(){function c(b,c){for(var f=d-1,g=0;g<c.length;g++)f=d>f?(g+1)*e:d,a(c[g].element).addClass("fadeInLeft").css({"animation-duration":f+"ms"}),function(d){b.addEvent(c[d].element,"AnimationEnd",function(){a(c[d].element).removeClass("fadeInLeft")})}(g)}var d=2500,e=70;return{options:{fields:null,csv:null,csvNames:null,data:[],rows:null,colshow:!1,scroll:!1,scrollHeight:200,width:0,expand:!1,expandEvent:!0,editCell:!1,editRow:!1,editEvent:!0,resize:!1,sort:!1,sortIndex:null,sortOrder:"asc",sortEvent:!0,animate:!1},valid:{update:[["integer","string","array"],"object"],updateTree:["array"],append:[["integer","string","object","array"],["object","array"]],insert:[["integer","string"],["object","array"]],select:[["integer","string"]],check:[["integer","string"]],uncheck:[["integer","string"]],remove:[["integer","string"]],move:[["integer","string"],["integer","string"]],sort:[["integer","string"],["string","undefined"],["object","undefined"]],scroll:["integer"],open:[["integer","string"]],fold:[["integer","string"]],get:[["integer","string"]],getAll:[["integer","string"]],getColumn:[["integer","string"]],showColumn:[["integer","string"],["object","undefined"]],hideColumn:[["integer","string"],["object","undefined"]],initColumns:["array"],showColumnMenu:[["integer","undefined"]],toggleColumnMenu:[["integer","undefined"]],showExpand:[["integer","string"],["object","undefined"],["object","undefined"]],hideExpand:[["object","undefined"]],showEditRow:[["integer","string"],["object","undefined"]],setCsv:["string","string"],setCsvFile:[["string","object"],"object"],getCsv:[["boolean","undefined"]],getCsvBase64:[["boolean","undefined"]],downloadCsv:[["string","undefined"],["boolean","undefined"]]},animate:{update:{after:function(){if(1==arguments.length){if(!b.browser.webkit&&!b.browser.mozilla)return;c(this,this.listAll())}}},updateTree:{after:function(){(b.browser.webkit||b.browser.mozilla)&&c(this,this.listAll())}},remove:{before:function(b){var c=this.get(b);a(c.element).addClass("fadeOutDown").css({"animation-duration":"350ms","animation-timing-function":"ease-out"})},delay:200},reset:{before:function(){for(var b=this.listAll(),c=2e3,d=c/b.length<50?50:c/b.length,e=0;e<b.length;e++)c-=d,a(b[e].element).addClass("fadeOutRight").css({"animation-duration":(c>0?c:50)+"ms","animation-fill-mode":"both"})},delay:1e3}}}},e}),jui.define("uix.tree.node",["jquery"],function(a){var b=function(b,c){function d(a){i.nodenum=isNaN(a)?i.nodenum:a,i.parent&&(i.index=null==i.parent.index?""+i.nodenum:i.parent.index+"."+i.nodenum),i.parent&&"string"==typeof i.index&&(i.depth=i.index.split(".").length),i.childrens.length>0&&e(i)}function e(a){for(var b=a.childrens,c=0;c<b.length;c++)b[c].reload(c),b[c].childrens.length>0&&e(b[c])}function f(){if(!c)return i.element;try{var b=a(c(a.extend({node:{index:i.index,data:i.data,depth:i.depth}},i.data))).get(0)}catch(d){console.log(d)}return b}function g(b){a(b.element).remove();for(var c=0;c<b.childrens.length;c++){var d=b.childrens[c];d.childrens.length>0?g(d):a(d.element).remove()}}function h(a){for(var b=0;b<a.childrens.length;b++){var c=a.childrens[b];c.reload(b),c.childrens.length>0&&h(c)}}var i=this;this.data=b,this.element=null,this.index=null,this.nodenum=null,this.parent=null,this.childrens=[],this.depth=0,this.type="open",this.reload=function(b,c){if(d(b),null!=this.element){var e=f();c?a(e).insertAfter(this.element):a(this.parent.element).children("ul").append(e),a(this.element).remove(),this.element=e}else this.element=f()},this.reloadChildrens=function(){h(this)},this.destroy=function(){null!=this.parent?this.parent.removeChild(this.index):(g(this),a(this.element).remove())},this.isLeaf=function(){return 0==this.childrens.length?!0:!1},this.fold=function(){a(this.element).children("ul").hide(),this.type="fold"},this.open=function(){a(this.element).children("ul").show(),this.type="open"},this.appendChild=function(b){a(this.element).children("ul").append(b.element),this.childrens.push(b)},this.insertChild=function(b,c){0==b?0==this.childrens.length?a(this.element).children("ul").append(c.element):a(c.element).insertBefore(this.childrens[0].element):a(c.element).insertAfter(this.childrens[b-1].element);var d=this.childrens.splice(0,b);d.push(c),this.childrens=d.concat(this.childrens),h(this)},this.removeChild=function(a){for(var b=0;b<this.childrens.length;b++){var c=this.childrens[b];c.index==a&&(this.childrens.splice(b,1),g(c))}h(this)},this.lastChild=function(){return this.childrens.length>0?this.childrens[this.childrens.length-1]:null},this.lastChildLeaf=function(a){var b=a?a:this.lastChild();return b.isLeaf()?b:this.lastChildLeaf(b.lastChild())}};return b}),jui.define("uix.tree.base",["jquery","util.base","uix.tree.node"],function(a,b,c){var d=function(a){function d(a,b,d){var e=new c(a,n.node);return e.parent=d?d:null,e.reload(b),e}function e(a,b){var c=b.childrens;if(c.length>0)for(var d=0;d<c.length;d++)a.push(c[d]),c[d].childrens.length>0&&e(a,c[d])}function f(a,b){if(!b)return null;var c=a.shift();return void 0==c?b:f(a,b.childrens[c])}function g(a,b){var c=o.getIndexList(a),e=k.getNodeParent(a),f=c[c.length-1];return node=d(b,f,e),e.insertChild(f,node),node}function h(a){if(null==l)l=d(a),m.tree.append(l.element);else{var b=d(a,l.childrens.length,l);l.appendChild(b)}return b}function i(a,b){var c=k.getNode(a),e=d(b,c.childrens.length,c);return c.appendChild(e),e}function j(a,b){for(var c=[];;){var d=b.parent;if(!d)break;c.push(d),b=d}for(var e=0;e<c.length;e++)if(a==c[e])return!0;return!1}var k=this,l=null,m=a.$obj,n=a.$tpl,o=b.index();this.appendNode=function(){var a=arguments[0],b=arguments[1];return b?i(a,b):h(a)},this.insertNode=function(a,b){return 0==l.childrens.length&&0==parseInt(a)?this.appendNode(b):g(a,b)},this.updateNode=function(a,b){var c=this.getNode(a);for(var d in b)c.data[d]=b[d];return c.reload(c.nodenum,!0),c.reloadChildrens(),c},this.removeNode=function(a){this.getNode(a).destroy()},this.removeNodes=function(){var a=l.childrens;if(a.length>0){var b=a.pop();b.parent=null,b.destroy(),this.removeNodes()}},this.openNode=function(a){null==a?this.getRoot().open():this.getNode(a).open()},this.foldNode=function(a){null==a?this.getRoot().fold():this.getNode(a).fold()},this.openNodeAll=function(a){for(var b=this.getNodeAll(a),c=0;c<b.length;c++)b[c].open();null==a&&this.getRoot().open()},this.foldNodeAll=function(a){for(var b=this.getNodeAll(a),c=0;c<b.length;c++)b[c].fold();null==a&&this.getRoot().fold()},this.moveNode=function(a,b){if(a!=b){var c=this.getNode(a),d=this.getNodeParent(b),e=o.getIndexList(b);if(tNo=e[e.length-1],!j(c,d)){c.parent.childrens.splice(c.nodenum,1),c.parent.reloadChildrens(),c.parent=d;var f=d.childrens.splice(0,tNo);f.push(c),d.childrens=f.concat(d.childrens),d.reloadChildrens()}}},this.getNode=function(a){if(null==a)return l.childrens;var b=l.childrens;if(o.isIndexDepth(a)){var c=o.getIndexList(a);return f(c,b[c.shift()])}return b[a]?b[a]:null},this.getNodeAll=function(a){for(var b=[],c=null==a?l.childrens:[this.getNode(a)],d=0;d<c.length;d++)c[d]&&(b.push(c[d]),c[d].childrens.length>0&&e(b,c[d]));return b},this.getNodeParent=function(a){var b=o.getIndexList(a);return 1==b.length?l:2==b.length?this.getNode(b[0]):b.length>2?(b.pop(),this.getNode(b.join("."))):void 0},this.getRoot=function(){return l}};return d}),jui.defineUI("uix.tree",["util.base","uix.tree.base"],function(a,b){var c=function(){function c(a,b){for(var c=0;c<b.length;c++){var d=b[c];$(d.element).removeClass("open fold leaf last"),d.parent&&d.isLeaf()?$(d.element).addClass("leaf"):"open"==d.type?($(d.element).addClass("open"),d.open()):($(d.element).addClass("fold"),d.fold()),d.parent?d.parent.lastChild()==d&&$(d.element).addClass("last"):$(d.element).addClass("root"),$(d.element).children("i:first-child").remove(),$(d.element).prepend($("<i></i>"))}}function d(a,b,c){if(null==b)if(a.options.rootHide){for(var d=a.uit.getRoot().childrens,e=0;e<d.length;e++)c(d[e].index);j(a,!1)}else c(b),j(a,!0);else c(b),j(a,!1)}function e(a,b){for(var c=0;c<b.length;c++)!function(b){var c=$(b.element);a.addEvent(c.children("i:first-child"),"click",function(c){"open"==b.type?a.fold(b.index,c):a.open(b.index,c),c.stopPropagation()}),a.addEvent(c.children("a,span,div")[0],"click",function(c){a.emit("select",[b,c]),c.stopPropagation()})}(b[c])}function f(a,b){if(a.options.drag){var c=a.uit.getRoot();$("body").unbind("mousemove").unbind("mouseup");for(var d=0;d<b.length;d++)!function(b){$(b.element).unbind("mousedown").unbind("mouseup"),a.addEvent(b.element,"mousedown",function(c){return"I"!=c.target.tagName?(null==k.start&&(k.start=b.index,a.emit("dragstart",[b.index,c])),!1):void 0}),a.addEvent(b.element,"mouseup",function(c){if("I"!=c.target.tagName){if(a.options.dragChild!==!1&&k.start&&k.start!=b.index){var d=b.lastChild(),e=d?l.getNextIndex(d.index):b.index+".0";a.move(k.start,e),a.emit("dragend",[e,c])}return k.start=null,k.end=null,!1}}),a.addEvent(c.element,"mouseup",function(b){if("I"!=b.target.tagName){if(a.options.dragChild!==!1&&k.start){var d=""+c.childrens.length;a.move(k.start,d),a.emit("dragend",[d,b])}return k.start=null,k.end=null,!1}})}(b[d]);a.addEvent("body","mouseup",function(b){return k.start&&k.end&&(a.move(k.start,k.end),a.emit("dragend",[k.end,b])),k.start=null,k.end=null,!1})}}function g(a){if(a.options.drag){$(a.root).find(".drag").remove();for(var b=a.listAll(),c=0;c<b.length;c++){var d=b[c],e=$(d.element).position();e.top>0&&i(a,d,e)}}}function h(a){if(a.options.drag)for(var b=a.listAll(),c=0;c<b.length;c++){var d=b[c],e=$(d.element).position();e.top>0&&d.parent&&d.parent.lastChild()==d&&(e.top=e.top+$(d.element).outerHeight(),i(a,d,e,!0))}}function i(a,b,c,d){if(a.options.drag){var e=d?l.getNextIndex(b.index):b.index,f=$("<div class='drag'></div>").attr("data-index",e).css(c).outerWidth($(b.element).outerWidth());$(a.root).append(f),a.addEvent(f,"mouseover",function(){k.start&&(k.end=e,f.addClass("on"))}),a.addEvent(f,"mouseout",function(){k.start&&f.removeClass("on")})}}function j(a,b){var d=a.listAll();c(a,d),e(a,d),f(a,d),g(a),h(a),b&&(c(a,[a.uit.getRoot()]),e(a,[a.uit.getRoot()]))}var k={start:null,end:null},l=a.index();this.init=function(){var a=this.options;if(this.uit=new b({$obj:{tree:$(this.root)},$tpl:this.tpl}),!a.root)throw new Error("JUI_CRITICAL_ERROR: root data is required");if(this.uit.appendNode(a.root),j(this,!0),a.rootHide){var c=this.uit.getRoot();$(c.element).css("padding-left","0px"),$(c.element).children("*:not(ul)").hide()}a.rootFold&&this.fold()},this.update=function(a,b){this.uit.updateNode(a,b),j(this)},this.append=function(){var a=1==arguments.length?arguments[0]:arguments[1],b=2==arguments.length?arguments[0]:null;a=void 0==a.length?[a]:a;for(var c=0;c<a.length;c++)null!=b?this.uit.appendNode(b,a[c]):this.uit.appendNode(a[c]);j(this)},this.insert=function(a,b){for(var c=void 0==b.length?[b]:b,d=0;d<c.length;d++)this.uit.insertNode(a,c[d]);j(this)},this.select=function(a){var b=null==a?this.uit.getRoot():this.get(a);return $(this.root).find("li").removeClass("active"),$(b.element).addClass("active"),b},this.remove=function(a){this.uit.removeNode(a),j(this)},this.reset=function(){this.uit.removeNodes(),j(this)},this.move=function(a,b){this.uit.moveNode(a,b),j(this)},this.open=function(a,b){if(null!=a||!this.options.rootHide){var c=null==a;this.uit.openNode(a),j(this,c),this.emit("open",[c?this.uit.getRoot():this.get(a),b])}},this.fold=function(a,b){if(null!=a||!this.options.rootHide){var c=null==a;this.uit.foldNode(a),j(this,c),this.emit("fold",[c?this.uit.getRoot():this.get(a),b])}},this.openAll=function(a){var b=this,c=null==a;d(this,a,function(a){b.uit.openNodeAll(a)}),this.emit("openall",[c?this.uit.getRoot():this.get(a)])},this.foldAll=function(a){var b=this,c=null==a;d(this,a,function(a){b.uit.foldNodeAll(a)}),this.emit("foldall",[c?this.uit.getRoot():this.get(a)])},this.list=function(){return this.uit.getNode()},this.listAll=function(){return this.uit.getNodeAll()},this.listParents=function(a){function b(a){null!=a.index&&(d.push(a),null!=a.parent&&b(a.parent))}var c=this.get(a),d=[];return c.parent&&b(c.parent),d.reverse()},this.get=function(a){return null==a?null:this.uit.getNode(a)},this.getAll=function(a){return null==a?null:this.uit.getNodeAll(a)}};return c.setting=function(){return{options:{root:null,rootHide:!1,rootFold:!1,drag:!1,dragChild:!0},valid:{update:["string","object"],append:[["string","object","array"],["object","array"]],insert:["string",["object","array"]],select:["string"],remove:["string"],move:["string","string"],open:[["string","null"],["object","undefined"]],fold:[["string","null"],["object","undefined"]],openAll:["string"],foldAll:["string"],listParents:["string"],get:["string"],getAll:["string"]}}},c}),jui.defineUI("uix.window",["jquery","util.base","ui.modal"],function(a,b,c){var d=function(){function b(){var a=h.$foot.length<1?5:h.$foot.outerHeight();h.$body.outerHeight(h.$root.outerHeight()-h.$head.outerHeight()-a)}var d=2e3,e=null,f={},g={},h={},i=null;this.init=function(){var j=this,k=this.options,l=a(this.root),m=a(this.root).children(".head"),n=a(this.root).children(".body"),o=a(this.root).children(".foot"),p=a("body");k.modal&&(k.move=!1,k.resize=!1),h={$root:l,$head:m,$body:n,$foot:o},p.children(this.selector).remove(),l.css(a.extend({position:"absolute"},k)).appendTo(p),k.move&&this.addEvent(m,"mousedown",function(a){e=l,f.check=!0,f.disX=a.pageX-e.offset().left,f.disY=a.pageY-e.offset().top}),k.resize&&(l.append("<i class='icon-resize resize'></i>"),this.addEvent(l.children(".resize"),"mousedown",function(){return e=l,g.check=!0,g.disX=e.width()+e.offset().left,g.disWidth=e.width(),g.disY=e.height()+e.offset().top,g.disHeight=e.height(),!1})),k.modal||j.addEvent(l,"mousedown",function(a){l.css("z-index",++d),a.stopPropagation()}),this.addEvent(m.find(".close"),"click",function(){return j.hide(),!1}),this.addEvent("body","mousemove",function(c){if(f.check){var d=c.pageX-f.disX,h=c.pageY-f.disY;a(e).css({left:d+"px",top:h+"px"})}if(g.check){var i=c.pageX-g.disX,j=c.pageY-g.disY;e.width(g.disWidth+i),e.height(g.disHeight+j),b()}}),this.addEvent("body","mouseup",function(a){f.check&&j.emit("move",a),g.check&&j.emit("resize",a),f.check=!1,g.check=!1}),this.type="hide",b(),setTimeout(function(){if(l.hide(),k.modal){var b=k.modalIndex>0?{index:k.modalIndex}:{};i=c(j.selector,a.extend({autoHide:!1},b))}},10)},this.hide=function(){i?i.hide():h.$root.hide(),this.emit("hide"),this.type="hide"},this.show=function(a,b){i?i.show():h.$root.show(),(a||b)&&this.move(a,b),this.emit("show"),this.type="show"},this.move=function(a,b){h.$root.css("left",a),h.$root.css("top",b)},this.update=function(a){h.$body.empty().html(a)},this.setTitle=function(a){h.$head.find(".title").empty().html(a)},this.setSize=function(a,c){h.$root.width(a),h.$root.height(c),b()},this.resize=function(){b()},this.resizeModal=function(){i&&i.resize()}};return d.setting=function(){function b(b,c){a(b.root).addClass(c).css({"animation-duration":"500ms","animation-fill-mode":"both"}),b.addEvent(b.root,"AnimationEnd",function(){a(b.root).removeClass(c)})}return{options:{width:400,height:300,left:"auto",top:"auto",right:"auto",bottom:"auto",modal:!1,move:!0,resize:!0,modalIndex:0,animate:!1},valid:{show:["number","number"],move:["number","number"],update:["string"],setTitle:["string"],setSize:["integer","integer"]},animate:{show:{after:function(){b(this,"fadeInDown")}},hide:{before:function(){b(this,"fadeOutUp")},after:function(){a(this.root).removeClass("fadeOutUp")},delay:500},move:{after:function(){b(this,"shake")}}}}},d}),jui.defineUI("uix.xtable",["jquery","util.base","ui.modal","uix.table"],function(a,b,c,d){var e=null;b.resize(function(){for(var a=jui.get("xtable"),b=0;b<a.length;b++)for(var c=a[b].list,d=0;d<c.length;d++)c[d].resize()},1e3);var f=function(){function f(b){function c(b,c){var d={};for(var e in b.options)-1==a.inArray(e,c)&&(d[e]=b.options[e]);return d}function e(b,c,d){var e=b.options;if(a(b.root).css({position:"relative"}),a(c.root).css({position:"absolute",top:"0","border-bottom-width":"0",margin:"0"}),a(d.root).css({margin:"0"}),e.width>0&&a(b.root).outerWidth(e.width),e.scrollWidth>0){var f=a(b.root).outerWidth();a(b.root).css({"max-width":b.options.scrollWidth,"overflow-x":"auto","overflow-y":"hidden"}),a(c.root).outerWidth(f),a(d.root).parent().outerWidth(f)}}function f(b,c){var d=a(c.root).clone(),e=c.listColumn();a(c.root).wrap("page"!=b.options.buffer?"<div class='body' style='max-height: "+b.options.scrollHeight+"px'></div>":"<div class='body'></div>"),a(c.root).find("thead > tr").outerHeight(0).not(":last-child").remove();for(var f=0;f<e.length;f++){var g=a(e[f].element);g.html("").outerHeight(0).attr("style",g.attr("style")+"border-top-width: 0px !important;border-bottom-width: 0px !important;padding-top: 0px !important;padding-bottom: 0px !important")}d.children("tbody").remove(),a(b.root).append(d.addClass("head")),a(b.root).css("padding-top",d.height())}var g=["buffer","bufferCount","csvCount","sortLoading","sortCache","sortIndex","sortOrder","event","rows","scrollWidth","width"];l=d(a(b.root).children("table"),c(b,g.concat("resize"))),f(b,l),k=d(a(b.root).children("table.head"),c(b,g)),e(b,k,l)}function g(b){k.on("colresize",function(c,d){for(var e=k.listColumn(),f=l.listColumn(),g=!1,h=e.length-1;h>=0;h--){var i=a(e[h].element).outerWidth();"page"==b.options.buffer||"show"!=e[h].type||g?(a(e[h].element).outerWidth(i),a(f[h].element).outerWidth(i)):(a(f[h].element).outerWidth("auto"),g=!0)}b.emit("colresize",[c,d])}),k.on("colshow",function(a,c){l.uit.showColumn(a.index),b.resize(),b.emit("colshow",[a,c])}),k.on("colhide",function(a,c){l.uit.hideColumn(a.index),b.resize(),b.emit("colhide",[a,c])}),k.on("colclick",function(a,c){b.emit("colclick",[a,c])}),k.on("coldblclick",function(a,c){b.emit("coldblclick",[a,c])}),k.on("colmenu",function(a,c){b.emit("colmenu",[a,c])}),k.on("sort",function(a,c){b.sort(a.index,a.order,c),b.emit("sort",[a,c]),b.options.sortCache&&b.setOption({sortIndex:a.index,sortOrder:a.order})}),l.on("select",function(a,c){b.emit("select",[a,c])}),l.on("rowmenu",function(a,c){b.emit("rowmenu",[a,c])}),l.on("expand",function(a,c){b.emit("expand",[a,c])}),l.on("expandend",function(a,c){b.emit("expandend",[a,c])})}function h(b){var c=a(b.root).children(".body");c.unbind("scroll").scroll(function(a){return this.scrollTop+b.options.scrollHeight>=c.get(0).scrollHeight?(b.next(),b.emit("scroll",a),!1):void 0})}function i(a,b,c){null==n?n=m:m=n;for(var d=m.slice(),e=[],f=0,g=d.length;g>f;f++)c(d[f][b])&&e.push(d[f]);a.update(e),a.emit("filter",[e])}function j(b){function c(b){var c=30;f.column+b<c||(a(e.head.element).outerWidth(f.column+b),a(e.body.element).outerWidth(f.column+b),b>0&&(a(l.root).parent().outerWidth(f.body+b),a(k.root).outerWidth(f.body+b)))}function d(){for(var b=0;b<k.uit.getColumnCount()-1;b++){var c=a(k.getColumn(b).element);c.find(".resize").css("left",c.outerWidth()+c.position().left+"px")}}var e={},f={},g=0;a(b.root).find("thead .resize").remove();for(var h=0;h<k.uit.getColumnCount()-1;h++){var i=a(k.getColumn(h).element),j=a("<div class='resize'></div>"),m=i.position();j.css({position:"absolute",width:"8px",height:i.outerHeight(),left:i.outerWidth()+(m.left-1)+"px",top:m.top+"px",cursor:"w-resize","z-index":"1"}),i.append(j),function(c){b.addEvent(j,"mousedown",function(b){return 0==g&&(g=b.pageX),e={head:k.getColumn(c),body:l.getColumn(c)},f={column:a(e.head.element).outerWidth(),body:a(l.root).outerWidth()},r=!0,!1})}(h)}b.addEvent("body","mousemove",function(a){g>0&&c(a.pageX-g)}),b.addEvent("body","mouseup",function(a){return g>0?(g=0,r=!1,d(),k.emit("colresize",[e.head,a]),!1):void 0}),k.on("colshow",d),k.on("colhide",d)}var k=null,l=null,m=[],n=null,o=null,p=1,q=!1,r=!1;this.init=function(){var b=this.options;if(b.data=null!=b.rows?b.rows:b.data,"TABLE"==this.root.tagName){var d=a(this.root).wrap("<div class='xtable'></div>");this.root=d.parent().get(0)}if(f(this),g(this),"page"!=b.buffer){var e=a(this.root).children(".body");e.css({"overflow-y":"scroll","overflow-x":"hidden"}),e.children("table").css({"border-bottom-width":"0"})}if("scroll"==b.buffer&&h(this),b.data&&this.update(b.data),b.tpl.loading){var i=a(b.tpl.loading);a(this.root).append(i),o=c(i,{target:this.selector,opacity:.1,autoHide:!1}),b.sortLoading=b.sortLoading===!0?500:b.sortLoading}b.resize&&(k.resizeColumns(),k.resize()),!b.resize&&b.scrollWidth>0&&j(this)},this.select=function(a){return l.select(a)},this.update=function(a){m=a,this.clear(),this.next(),this.emit("update"),k.emit("colresize"),this.options.sortIndex&&this.sort(this.options.sortIndex,this.options.sortOrder,void 0,!0)},this.next=function(){var a=(p-1)*this.options.bufferCount,b=a+this.options.bufferCount;if(b=b>m.length?m.length:b,b<=m.length){for(var c=[],d=a;b>d;d++)c.push(m[d]);l.append(c),this.emit("next",[p]),c.length>0&&p++}},this.page=function(a){return"scroll"==this.options.buffer?!1:this.getPage()==a?!1:(e=p>a?"prev":"next",this.clear(),p=1>a?1:a,void this.next())},this.sort=function(a,c,d,e){function f(){var a=b.sort(m);a.setCompare("desc"==i.order?function(a,b){return g(a)>g(b)?!0:!1}:function(a,b){return g(a)<g(b)?!0:!1}),a.run(),h.emit("sortend",[i,d]),h.clear(),h.next(),h.hideLoading()}function g(a){var b=a[i.name];return"string"==typeof b?b.toLowerCase():isNaN(b)||null==b?"":b}if(this.options.fields&&this.options.sort&&!r){var h=this,i=k.getColumn(a);"string"==typeof i.name&&(i.order=c?c:"asc"==i.order?"desc":"asc",k.uit.setColumn(a,i),this.options.sortLoading&&!e?(h.showLoading(),setTimeout(function(){f()},this.options.sortLoading)):f())}},this.filter=function(a,b,c){if(this.options.fields){this.rollback();var d=k.getColumn(a);d.name&&b?i(this,d.name,function(a){if("function"==typeof c){if(c(a,b))return!0}else if(-1!=(""+a).indexOf(""+b))return!0;return!1}):this.emit("filter",[m])}},this.rollback=function(){null!=n&&(this.update(n),n=null)},this.clear=function(){p=1,l.uit.removeRows(),l.scroll()},this.reset=function(){this.clear(),m=[]},this.resize=function(){k.resizeColumns(),k.resize(),k.emit("colresize")},this.height=function(b){"scroll"==this.options.buffer&&(this.options.scrollHeight=b,a(this.root).find(".body").css("max-height",b+"px"),h(this))},this.size=function(){return m.length},this.count=function(){return m.length},this.list=function(){return l.list()},this.listColumn=function(){return k.listColumn()},this.listData=function(){return m},this.get=function(a){return null==a?null:l.get(a)},this.getColumn=function(a){return k.getColumn(a)},this.getData=function(a){return m[a]},this.showColumn=function(a){k.showColumn(a)},this.hideColumn=function(a){k.hideColumn(a)},this.initColumns=function(a){k.initColumns(a),l.initColumns(a),k.emit("colresize")},this.showColumnMenu=function(a){k.showColumnMenu(a)},this.hideColumnMenu=function(){k.hideColumnMenu()},this.toggleColumnMenu=function(a){k.toggleColumnMenu(a)},this.showExpand=function(a,b){l.showExpand(a,b)},this.hideExpand=function(a){a?l.hideExpand(a):l.hideExpand()},this.getExpand=function(){return l.getExpand()},this.showLoading=function(a){if(o&&!q&&(o.show(),q=!0,a>0)){var b=this;setTimeout(function(){b.hideLoading()},a)}},this.hideLoading=function(){o&&q&&(o.hide(),q=!1)},this.setCsv=function(a){if(this.options.fields||this.options.csv){var c=b.getCsvFields(this.options.fields,this.options.csv);this.update(b.csvToData(c,a))}},this.setCsvFile=function(a){if(this.options.fields||this.options.csv){var c=this;b.fileToCsv(a,function(a){c.setCsv(a)})}},this.getCsv=function(){if(this.options.fields||this.options.csv){var a=b.getCsvFields(this.options.fields,this.options.csv),c=m.length>this.options.csvCount?this.options.csvCount:m.length;return b.dataToCsv2({fields:a,rows:m,count:c,names:this.options.csvNames})}},this.getCsvBase64=function(){return this.options.fields||this.options.csv?b.csvToBase64(this.getCsv()):void 0},this.downloadCsv=function(a){b.typeCheck("string",a)&&(a=a.split(".")[0]);var c=document.createElement("a");c.download=a?a+".csv":"table.csv",c.href=this.getCsvBase64(),document.body.appendChild(c),c.click(),c.parentNode.removeChild(c)},this.rowFunc=function(a,b,c){if(this.options.fields){var d="function"==typeof c?!0:!1,e=0,f=d?0:m.length,g=k.getColumn(b);if(g.name)for(var h=0;h<m.length;h++){var i=m[h][g.name];isNaN(i)||(d?c(m[h])&&(e+=i,f++):e+=i)}return"sum"==a?e:"avg"==a?e/f:null}},this.getPage=function(){return p-1},this.activeIndex=function(){return l.activeIndex()}};return f.setting=function(){function c(b,c,e){for(var g=d-1,h=0;h<c.length;h++)g=d>g?(h+1)*f:d,a(c[h].element).addClass(e).css({"animation-duration":g+"ms"}),function(d){b.addEvent(c[d].element,"AnimationEnd",function(){a(c[d].element).removeClass(e)})}(h)}var d=2500,f=70;return{options:{fields:null,csv:null,csvNames:null,csvCount:1e4,data:[],rows:null,colshow:!1,expand:!1,expandEvent:!0,resize:!1,scrollHeight:200,scrollWidth:0,width:0,buffer:"scroll",bufferCount:100,sort:!1,sortLoading:!1,sortCache:!1,sortIndex:null,sortOrder:"asc",sortEvent:!0,animate:!1},valid:{select:[["integer","string"]],update:["array"],page:["integer"],sort:[["integer","string"],["string","undefined"],["object","undefined"],["boolean","undefined"]],filter:[["integer","string"],["integer","string","boolean"],"function"],height:["integer"],getColumn:[["integer","string"]],getData:[["integer","string"]],showColumn:[["integer","string"]],hideColumn:[["integer","string"]],initColumns:["array"],showColumnMenu:[["integer","undefined"]],toggleColumnMenu:[["integer","undefined"]],showExpand:[["integer","string"],"object"],hideExpand:[["integer","string"]],showLoading:["integer"],setCsv:["string"],setCsvFile:["object"],downloadCsv:[["string","undefined"]],rowFunc:["string",["integer","string"],"function"]},animate:{update:{after:function(){(b.browser.webkit||b.browser.mozilla)&&c(this,this.list(),"fadeInLeft")}},page:{after:function(){c(this,this.list(),"next"==e?"fadeInLeft":"fadeInRight")}},reset:{before:function(){for(var b=this.list(),c=2e3,d=c/b.length<50?50:c/b.length,e=0;e<b.length;e++)c-=d,a(b[e].element).addClass("fadeOutRight").css({"animation-duration":(c>0?c:50)+"ms","animation-fill-mode":"both"})},delay:1e3},filter:{after:function(){c(this,this.list(),"flipInX")}}}}},f});