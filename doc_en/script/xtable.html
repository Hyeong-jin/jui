
<!DOCTYPE HTML>
<html>
<head>
<META charset="UTF-8">
<title>[JUI Library] - JavaScript/XTable</title>	
	
<link rel="stylesheet" href="../../res/manual.css" />
<link rel="stylesheet" href="../../lib/jui.min.css" />
<link rel="stylesheet" href="../../lib/prism.css" />
<link rel="stylesheet" href="../../lib/animate.min.css" />
<script src="../../lib/jquery-2.0.3.min.js"></script>
<script src="../../lib/jquery.binder.js"></script>
<script src="../../lib/jui.min.js"></script>
<script src="../../lib/prism.js"></script>
<script src="../../res/manual.js"></script>

<script>
jui.ready(function(ui, uix, _) {
	xtable_3_page = 1;
	
	// X-Table, scroll
	xtable_1 = uix.xtable("#xtable_1", {
		fields: [ "name", "age", "location" ],
		expand: true,
		resize: true,
		colshow: true,
		sort: true,
		sortLoading: true,
		buffer: "scroll", // scroll, page, s-page
		bufferCount: 20,
		event: {
			colmenu: function(column, e) {
				this.columnMenu(e.pageX - 25);
			}
		},
        animate: true
	});

	// X-Table, page
	xtable_2 = uix.xtable("#xtable_2", {
		fields: [ "name", "age", "location" ],
		resize: true,
		sort: true,
		buffer: "page", // scroll, page, s-page
		bufferCount: 20,
        animate: true
	});

	// X-Table, scroll-page
	xtable_3 = uix.xtable("#xtable_3", {
		fields: [ "name", "age", "location" ],
		resize: true,
		sort: true,
		buffer: "s-page", // scroll, page, s-page
		bufferCount: 20,
        animate: true
	});

	// X-Table, filter
	xtable_4 = uix.xtable("#xtable_4", {
		fields: [ "name", "age", "location" ],
		resize: true,
		sort: true,
		buffer: "s-page", // scroll, page, s-page
		bufferCount: 20,
        animate: true
	});
	
	xtable_4.update([
		{ name: "Hong", age: "20", location: "Ilsan" },
		{ name: "Jung", age: "30", location: "Seoul" },
		{ name: "Park", age: "15", location: "Yeosu" },
		{ name: "Kang", age: "32", location: "Seoul" },
		{ name: "Song", age: "12", location: "Gwangju" },
		{ name: "Yoon", age: "22", location: "Damyang" },
		{ name: "Kim", age: "33", location: "Busan" },
		{ name: "Hwang", age: "21", location: "Seoul" }
	]);
});

function xtableRun(type) {
	var result = [], 
		dataSize = 1000000,
		nStart = new Date().getTime();
	
	for(var i = 0; i < dataSize; i++) {
		result.push({ name: "Alvin" + i, age: dataSize - i, location: "LA" });
	}
	
	var nEnd = new Date().getTime(); 
	if(type == 1) { 
		xtable_1.update(result);
	}
	if(type == 2) {
		xtable_2.update(result);
		xtable_2_page = 1;
		xtable_2.resize();
	}
	if(type == 3) {
		xtable_3.update(result);
		xtable_3_page = 1;
		xtable_3.resize();
	}
	if(type == 4) {
		paging_2_xtable.update(result);
		paging_2_xtable.resize();
	}
	var nEnd2 = new Date().getTime(); 
	
	alert(
		"임의의 데이터 " + (dataSize / 10000) + "만건을 생성합니다.\n\n" +
		"데이터 생성시간 : " + ((nEnd - nStart) / 1000) + "sec\n" +
		"테이블 갱신시간 : " + ((nEnd2 - nEnd) / 1000) + "sec"
	);
}

function xtable2Page(no) {
	if(xtable_2_page == null) return;
	
	xtable_2_page += no;
	xtable_2_page = (xtable_2_page < 1) ? 1 : xtable_2_page;
	xtable_2.page(xtable_2_page);
}

function xtable3Page(no) {
	if(xtable_3_page == null) return;

	xtable_3_page += no;
	xtable_3_page = (xtable_3_page < 1) ? 1 : xtable_3_page;
	xtable_3.page(xtable_3_page);
}

function xtableFilter() {
	alert("테이블의 'location' 컬럼의 값에 문자열 'eo'가 포함된 로우를 반환합니다.");
	
	xtable_4.filter("location", "eo");
	// or, xtable_4.filter(2, "eo");
}

function xtableFilterCustom() {
	alert("테이블의 'age' 컬럼의 값이 '30' 보다 큰 로우를 반환합니다.");
	
	xtable_4.filter("age", 30, function(target, keyword) {
		if(target > keyword) return true;
	});
}

</script>
</head>
<body class="jui">
	
<div class="page-header">
	<h1>X-Table</h1>
	<p class="br">
		수백만건의 데이터 로우를 처리할 수 있는 대용량 테이블입니다.<br/>
		기존의 성능에 문제가 있었던 이너 스크롤 문제를 해결하였으며, 버퍼를 활용한 페이징이나 스크롤링 기능을 제공합니다.
	</p>
</div>

<section>
	<h2>Scroll (+Dropdown, +Loading)</h2>
	<p>
		<a class="btn btn-gray btn-mini" href="javascript:xtableRun(1)">Run</a> - 
		100만건의 데이터를 추가하는 데모이며, 스크롤이 맨 밑으로 내려갔을 경우에 로우를 추가적으로 렌더링합니다.
		
		<div id="xtable_1" class="xtable xtable-rect">
			<table class="table table-simple table-headline">
				<thead>
					<tr>
						<th>Name</th>
						<th>Age</th>
						<th>Location</th>
					</tr>
				</thead>
				<tbody></tbody>
			</table>
		</div>
			
		<script data-jui="#xtable_1" data-tpl="row" type="text/template">
			<tr>
				<td><!= name !></td>
				<td><!= age !></td>
				<td><!= location !></td>
			</tr>
		</script>

		<script data-jui="#xtable_1" data-tpl="none" type="text/template">
			<tr>
				<td colspan="3">테이블에 데이터가 존재하지 않습니다.</td>
			</tr>
		</script>
		
		<script data-jui="#xtable_1" data-tpl="menu" type="text/template">
			<div class="dropdown">
				<div class="anchor"></div>
				
				<ul style="width: 150px">
				<! for(var i = 0; i < columns.length; i++) { !>
					<li>
						<input type="checkbox" />&nbsp; <!= columns[i] !>
					</li>
				<! } !>
				</ul>
			</div>
		</script>
		
		<script data-jui="#xtable_1" data-tpl="loading" type="text/template">
			<div class="loading"></div>		
		</script>
	</p>
	
	<p class="br">
<pre><code class="language-javascript">jui.ready(function(ui, uix, _) {
	xtable_1 = uix.xtable("#xtable_1", {
		fields: [ "name", "age", "location" ],
		expand: true,
		resize: true,
		colshow: true,
		sort: true,
		sortLoading: true,
		buffer: "scroll", // scroll, page, s-page
		bufferCount: 20,
		event: {
			colmenu: function(column, e) {
				this.columnMenu(e.pageX - 25);
			}
		}
	});
});</code></pre>

<pre><code class="language-markup">&lt;div id="xtable_1" class="xtable xtable-rect" style="width: 600px;"&gt;
	&lt;table class="table table-simple table-headline">
		&lt;thead>
			&lt;tr>
				&lt;th>Name&lt;/th>
				&lt;th>Age&lt;/th>
				&lt;th>Location&lt;/th>
			&lt;/tr>
		&lt;/thead>
		&lt;tbody>&lt;/tbody>
	&lt;/table>
&lt;/div&gt;

&lt;!-- 정렬 기능 사용시, 보여지는 로딩 템플릿 --&gt;
&lt;script data-jui="#xtable_1" data-tpl="loading" type="text/template"&gt;
	&lt;div class="loading">&lt;/div&gt;
&lt;/script&gt;</code></pre>
	</p>
</section>

<section>
	<h2>Page</h2>
	<p>
		<a class="btn btn-gray btn-mini" href="javascript:xtableRun(2)">Run</a> - 
		100만건의 데이터를 추가하는 데모이며, 스크롤이 없는 페이징 형태로 추가 데이터를 렌더링합니다.
		
		<div id="xtable_2" class="xtable xtable-rect">
			<table class="table table-simple table-headline">
				<thead>
					<tr>
						<th>Name</th>
						<th>Age</th>
						<th>Location</th>
					</tr>
				</thead>
				<tbody></tbody>
			</table>
		</div>
		<div class="row" align="right" style="text-align: right; margin-top: 3px;">
			<div class="group">
				<a href="javascript:xtable2Page(-1);" class="btn btn-black btn-mini">Prev</a>
				<a href="javascript:xtable2Page(1);"class="btn btn-black btn-mini">Next</a>
			</div>
		</div>
			
		<script data-jui="#xtable_2" data-tpl="row" type="text/template">
			<tr>
				<td><!= name !></td>
				<td><!= age !></td>
				<td><!= location !></td>
			</tr>
		</script>

		<script data-jui="#xtable_2" data-tpl="none" type="text/template">
			<tr>
				<td colspan="3">테이블에 데이터가 존재하지 않습니다.</td>
			</tr>
		</script>
	</p>
	
	<p class="br">
<pre><code class="language-javascript">xtable_2 = uix.xtable("#xtable_2", {
	fields: [ "name", "age", "location" ],
	resize: true,
	sort: true,
	buffer: "page", // scroll, page, s-page
	bufferCount: 20
});</code></pre>
	</p>
</section>

<section>
	<h2>Page-Scroll</h2>
	<p>
		<a class="btn btn-gray btn-mini" href="javascript:xtableRun(3)">Run</a> - 
		100만건의 데이터를 추가하는 데모이며, 스크롤이 있는 페이징 형태로 추가 데이터를 렌더링합니다.
		
		<div id="xtable_3" class="xtable xtable-rect">
			<table class="table table-simple table-headline">
				<thead>
					<tr>
						<th>Name</th>
						<th>Age</th>
						<th>Location</th>
					</tr>
				</thead>
				<tbody></tbody>
			</table>
		</div>
		<div class="row" align="right" style="text-align: right; margin-top: 3px;">
			<div class="group">
				<a href="javascript:xtable3Page(-1);" class="btn btn-black btn-mini">Prev</a>
				<a href="javascript:xtable3Page(1);"class="btn btn-black btn-mini">Next</a>
			</div>
		</div>
			
		<script data-jui="#xtable_3" data-tpl="row" type="text/template">
			<tr>
				<td><!= name !></td>
				<td><!= age !></td>
				<td><!= location !></td>
			</tr>
		</script>

		<script data-jui="#xtable_3" data-tpl="none" type="text/template">
			<tr>
				<td colspan="3">테이블에 데이터가 존재하지 않습니다.</td>
			</tr>
		</script>
	</p>	
	
	<p class="br">
<pre><code class="language-javascript">xtable_3 = uix.xtable("#xtable_3", {
	fields: [ "name", "age", "location" ],
	resize: true,
	sort: true,
	buffer: "s-page", // scroll, page, s-page
	bufferCount: 20
});</code></pre>
	</p>
</section>

<section>
	<h2>Filter</h2>
	<p>
		<a class="btn btn-gray btn-mini" href="javascript:xtableFilter()">Filter</a>
		<a class="btn btn-gray btn-mini" href="javascript:xtableFilterCustom()">Filter Custom</a> - 
		좌측에 버튼을 클릭하면 특정 기준에 맞게 테이블의 로우가 필터링 됩니다.
		
		<div id="xtable_4" class="xtable xtable-rect">
			<table class="table table-simple table-headline">
				<thead>
					<tr>
						<th>Name</th>
						<th>Age</th>
						<th>Location</th>
					</tr>
				</thead>
				<tbody></tbody>
			</table>
		</div>
			
		<script data-jui="#xtable_4" data-tpl="row" type="text/template">
			<tr>
				<td><!= name !></td>
				<td><!= age !></td>
				<td><!= location !></td>
			</tr>
		</script>

		<script data-jui="#xtable_4" data-tpl="none" type="text/template">
			<tr>
				<td colspan="3">테이블에 데이터가 존재하지 않습니다.</td>
			</tr>
		</script>
	</p>	
	
	<p class="br">
<pre><code class="language-javascript">function xtableFilter() {
	xtable_4.filter("location", "eo");
	// or, xtable_4.filter(2, "eo");
}

function xtableFilterCustom() {
	xtable_4.filter("age", 30, function(target, keyword) {
		if(target > keyword) return true;
	});
}</code></pre>
	</p>
</section>

</body>
</html>